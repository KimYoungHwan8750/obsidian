```json
module.exports = {
  apps: [
    {
      name: "app-blue",
      script: "uvicorn",
      args: "main:app --port 8081",
      restart_delay: 1000 // 죽었을 때 1초 후 재시작
    },
    {
      name: "app-green",
      script: "uvicorn",
      args: "main:app --port 8082",
      restart_delay: 1000
    }
  ]
};
```

```nginx
upstream fastapi_servers {
    server 127.0.0.1:8081;
    server 127.0.0.1:8082;
    # 한쪽이 죽으면 알아서 제외하고 살아있는 쪽으로 보냄
}

server {
    listen 80;
    location / {
        proxy_pass http://fastapi_servers;
    }
}
```

nginx로 살아있는 서버로 자동으로 라우팅해주면서 