# ì „ìì •ë¶€ í”„ë ˆì„ì›Œí¬ ê¸°ë°˜ ë ˆê±°ì‹œ í”„ë¡œì íŠ¸ ì‹¬í™” ë¶„ì„ ë³´ê³ ì„œ

  

## ğŸ“‹ ê°œìš”

  

ë³¸ ë³´ê³ ì„œëŠ” ì „ìì •ë¶€ í”„ë ˆì„ì›Œí¬ 3.8.0 ê¸°ë°˜ì˜ ë ˆê±°ì‹œ í”„ë¡œì íŠ¸ì— ëŒ€í•œ ì‹¬í™” ë¶„ì„ ê²°ê³¼ë¥¼ ë‹´ê³  ìˆìŠµë‹ˆë‹¤. ì´ í”„ë¡œì íŠ¸ëŠ” ê³µì¥ì‹ ì„¤ê³„ë¥¼ í†µí•´ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸ë“¤ì„ ì²´ê³„ì ìœ¼ë¡œ êµ¬ì¶•í•˜ì—¬ ë¹ ë¥¸ ê°œë°œì´ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆìœ¼ë©°, íŠ¹íˆ ì‹ ì… ê°œë°œìê°€ ë¹ ë¥´ê²Œ ì ì‘í•  ìˆ˜ ìˆë„ë¡ í‘œì¤€í™”ëœ íŒ¨í„´ê³¼ ìƒì„¸í•œ ì‚¬ìš©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤.

  

## ğŸ—ï¸ í”„ë¡œì íŠ¸ êµ¬ì¡° ë¶„ì„

  

### 1. ê¸°ìˆ  ìŠ¤íƒ

- **í”„ë ˆì„ì›Œí¬**: ì „ìì •ë¶€ í”„ë ˆì„ì›Œí¬ 3.8.0

- **Spring**: 4.3.16.RELEASE

- **ë°ì´í„°ë² ì´ìŠ¤**: MariaDB, SQL Server ì§€ì›

- **ORM**: MyBatis (ì „ìì •ë¶€ í”„ë ˆì„ì›Œí¬ ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ)

- **ë¹Œë“œ ë„êµ¬**: Maven

- **Java**: 1.8

- **í”„ë¡ íŠ¸ì—”ë“œ**: JSP, Bootstrap, jQuery

  

### 2. í•µì‹¬ ì•„í‚¤í…ì²˜ íŠ¹ì§•

- **ê³µì¥ì‹ ì„¤ê³„**: ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ ê°œë°œ

- **ë™ì  ë¼ìš°íŒ…**: PathVariableì„ í™œìš©í•œ ìœ ì—°í•œ URL ë§¤í•‘

- **í†µí•© ë°ì´í„° ì²˜ë¦¬**: CommonMapì„ í†µí•œ ì¼ê´€ëœ ë°ì´í„° ì²˜ë¦¬

- **ë™ì  ì¿¼ë¦¬**: ëŸ°íƒ€ì„ queryId ê¸°ë°˜ DB ì²˜ë¦¬

  

## ğŸ¯ í•µì‹¬ ì»´í¬ë„ŒíŠ¸ ë¶„ì„

  

### 1. JSP Taglib ì‹œìŠ¤í…œ

  

#### 1.1 íƒœê·¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ êµ¬ì„±

í”„ë¡œì íŠ¸ëŠ” 5ê°œì˜ ì£¼ìš” íƒœê·¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤:

  

- **card.tld**: ì¹´ë“œí˜• UI ì»´í¬ë„ŒíŠ¸ (ì œëª©, ë‚´ìš©, ë²„íŠ¼ ê´€ë¦¬)

- **form.tld**: í¼ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸ (ê²€ìƒ‰ ì¡°ê±´ìš©, ë§ˆì§„ 0ìœ¼ë¡œ ìƒì„±)

- **label.tld**: ë¼ë²¨ì´ ìˆëŠ” í¼ ì»´í¬ë„ŒíŠ¸ (ì¼ë°˜ í¼ ì…ë ¥ìš©)

- **section.tld**: ì„¹ì…˜ ê´€ë¦¬ ì»´í¬ë„ŒíŠ¸ (ëª¨ë‹¬ íƒ€ì…ë³„ ì„¹ì…˜)

- **func.tld**: ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ (JSON ë³€í™˜, í¬ë§·í„° ë“±)

  

#### 1.2 ì£¼ìš” íƒœê·¸ ìƒì„¸ ë¶„ì„

  

**FormGrid íƒœê·¸ - AG-Grid ê¸°ë°˜ ë°ì´í„° ê·¸ë¦¬ë“œ**

```java

/**

Â * AG-Grid ê¸°ë°˜ ë°ì´í„° ê·¸ë¦¬ë“œ ìƒì„± íƒœê·¸

Â * @param id: ê·¸ë¦¬ë“œ ID (í•„ìˆ˜)

Â * @param height: ê·¸ë¦¬ë“œ ë†’ì´ (px, % ì§€ì›)

Â * @param style: ì¶”ê°€ ìŠ¤íƒ€ì¼

Â * @param addClassName: ì¶”ê°€ CSS í´ë˜ìŠ¤

Â */

public class FormGrid extends SimpleTagSupport {

Â  Â  private String id = "";

Â  Â  private String height = "";

Â  Â  private String style = "";

Â  Â  private String addClassName = "";

Â  Â  @Override

Â  Â  public void doTag() throws JspException, IOException {

Â  Â  Â  Â  JspContext context = getJspContext();

Â  Â  Â  Â  JspWriter out = context.getOut();

Â  Â  Â  Â  String result = "";

  

Â  Â  Â  Â  // ë†’ì´ ì„¤ì • ê²€ì¦ ë° AG-Grid í…Œë§ˆ ì ìš©

Â  Â  Â  Â  if (StringUtils.isEmpty(height.replace("%", "").replace("px", ""))) {

Â  Â  Â  Â  Â  Â  result += " Â  Â  Â  Â <div id=\"" + id + "\" class=\"ag-theme-balham " + addClassName + "\" style=\"" + style + "\"></div> \n";

Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  result += " Â  Â  Â  Â <div id=\"" + id + "\" class=\"ag-theme-balham " + addClassName + "\" style=\"" + style + "\" data-height=\"" + height + "\"></div> \n";

Â  Â  Â  Â  }

Â  Â  Â  Â  out.print(result);

Â  Â  }

}

```

  

**FormInput íƒœê·¸ - ë‹¤ì–‘í•œ ì…ë ¥ íƒ€ì… ì§€ì›**

```java

/**

Â * ë‹¤ì–‘í•œ ì…ë ¥ íƒ€ì…ì„ ì§€ì›í•˜ëŠ” í¼ íƒœê·¸

Â * @param type: ì…ë ¥ íƒ€ì… (text, hidden, checkbox, radio, autocomplete)

Â * @param id: í•„ë“œ ID (í•„ìˆ˜)

Â * @param caption: ë¼ë²¨ í…ìŠ¤íŠ¸

Â * @param size: Bootstrap ê·¸ë¦¬ë“œ í¬ê¸° (1-12)

Â * @param queryId: ë™ì  ì˜µì…˜ ìƒì„±ìš© ì¿¼ë¦¬ ID

Â * @param all: "ì „ì²´" ì˜µì…˜ ì‚¬ìš© ì—¬ë¶€ (checkbox/radio)

Â * @param code: ìë™ì™„ì„± ì½”ë“œ í•„ë“œ

Â */

public class FormInput extends SimpleTagSupport {

Â  Â  private String type = "text";

Â  Â  private String id = "";

Â  Â  private String caption = "";

Â  Â  private String size = "search_list";

Â  Â  private String value = "";

Â  Â  private String className = "default";

Â  Â  private String addClassName = "";

Â  Â  private String addAttr = "";

Â  Â  private int colNum = 0;

Â  Â  private String queryId = "";

Â  Â  private boolean all = false;

Â  Â  private String allLabel = "";

Â  Â  private String code = "";

Â  Â  @Override

Â  Â  public void doTag() throws JspException, IOException {

Â  Â  Â  Â  ApplicationContext context = ApplicationContextProvider.getApplicationContext();

Â  Â  Â  Â  PageContext pageContext = (PageContext) getJspContext();

Â  Â  Â  Â  JspWriter out = pageContext.getOut();

Â  Â  Â  Â  String result = "";

  

Â  Â  Â  Â  // ë™ì  ì˜µì…˜ ìƒì„± (queryId ê¸°ë°˜)

Â  Â  Â  Â  if ("checkbox".equals(type) || "radio".equals(type)) {

Â  Â  Â  Â  Â  Â  List<CommonMap> list = new ArrayList<CommonMap>();

Â  Â  Â  Â  Â  Â  HttpSession session = pageContext.getSession();

Â  Â  Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  Â  Â  CommonService service = context.getBean(CommonService.class);

Â  Â  Â  Â  Â  Â  Â  Â  CommonMap param = MapUtils.parseSession(session);

Â  Â  Â  Â  Â  Â  Â  Â  // ê³µí†µì½”ë“œ ì¡°íšŒ (#ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ê²½ìš°)

Â  Â  Â  Â  Â  Â  Â  Â  if (queryId.startsWith("#")) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  param.put("queryId", "common.select_commCode");

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  param.put("parentCodeId", queryId.substring(1).toUpperCase());

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  list = service.select(param);

Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ì¼ë°˜ ì¿¼ë¦¬ ì¡°íšŒ

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  param.put("queryId", queryId);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  list = service.select(param);

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  } catch (Exception e) { }

Â  Â  Â  Â  Â  Â  // ì˜µì…˜ HTML ìƒì„±

Â  Â  Â  Â  Â  Â  for(int i=0; i<list.size(); i++) {

Â  Â  Â  Â  Â  Â  Â  Â  CommonMap item = list.get(i);

Â  Â  Â  Â  Â  Â  Â  Â  String addData = "";

Â  Â  Â  Â  Â  Â  Â  Â  // ì¶”ê°€ ë°ì´í„° ì†ì„± ì„¤ì •

Â  Â  Â  Â  Â  Â  Â  Â  if (item.has("dataVal1")) addData += " data-val1='" + item.getString("dataVal1") + "'";

Â  Â  Â  Â  Â  Â  Â  Â  if (item.has("dataVal2")) addData += " data-val2='" + item.getString("dataVal2") + "'";

Â  Â  Â  Â  Â  Â  Â  Â  if (all && "checkbox".equals(type)) addData += "data-checkbox=\"" + id + "_item\"";

Â  Â  Â  Â  Â  Â  Â  Â  result += " Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <label class=\"search-cond\"" + style + "><input type=\"" + type + "\" id=\"" + (id + i) + "\" name=\"" + id + "\" value=\"" + item.getString("value") + "\" " + addData + (value.equals(item.getString("value")) ? " checked='checked'" : "") +" />&nbsp;" + item.getString("text") + "</label> \n";

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }

Â  Â  Â  Â  out.print(result);

Â  Â  }

}

```

  

**LabelInput íƒœê·¸ - ë¼ë²¨ì´ ìˆëŠ” í¼ ì…ë ¥**

```java

/**

Â * ë¼ë²¨ì´ ìˆëŠ” í¼ ì…ë ¥ íƒœê·¸

Â * @param type: ì…ë ¥ íƒ€ì… (text, autocomplete)

Â * @param id: í•„ë“œ ID (í•„ìˆ˜)

Â * @param caption: ë¼ë²¨ í…ìŠ¤íŠ¸ (í•„ìˆ˜)

Â * @param size: Bootstrap ê·¸ë¦¬ë“œ í¬ê¸° (ê¸°ë³¸: 4)

Â * @param icon: ì•„ì´ì½˜ í´ë˜ìŠ¤ (ê¸°ë³¸: fas fa-pencil-alt)

Â * @param state: ìƒíƒœ (readonly, disabled)

Â * @param stateIcon: ìƒíƒœë³„ ì•„ì´ì½˜

Â * @param btnId: ë²„íŠ¼ ID (ë²„íŠ¼ì´ ìˆëŠ” ê²½ìš°)

Â * @param btnCaption: ë²„íŠ¼ í…ìŠ¤íŠ¸

Â * @param btnClass: ë²„íŠ¼ ìŠ¤íƒ€ì¼ í´ë˜ìŠ¤

Â */

public class LabelInput extends SimpleTagSupport {

Â  Â  private String type = "text";

Â  Â  private String id = "";

Â  Â  private String caption = "";

Â  Â  private String size = "4";

Â  Â  private String value = "";

Â  Â  private String className = "default";

Â  Â  private String addClassName = "";

Â  Â  private String addAttr = "";

Â  Â  private String icon = "fas fa-pencil-alt";

Â  Â  private String state = "";

Â  Â  private String stateIcon = "fas fa-eye";

Â  Â  private String btnId = "";

Â  Â  private String btnClass = "";

Â  Â  private String btnCaption = "";

Â  Â  private String code = "";

Â  Â  private String queryId = "";

Â  Â  @Override

Â  Â  public void doTag() throws JspException, IOException {

Â  Â  Â  Â  JspContext context = getJspContext();

Â  Â  Â  Â  JspWriter out = context.getOut();

Â  Â  Â  Â  String result = "";

Â  Â  Â  Â  // ìƒíƒœë³„ ì²˜ë¦¬

Â  Â  Â  Â  if ("readonly".equals(state)) {

Â  Â  Â  Â  Â  Â  icon = StringUtils.isEmpty(stateIcon) ? "" : stateIcon;

Â  Â  Â  Â  Â  Â  addAttr += " readonly='readonly' ";

Â  Â  Â  Â  } else if ("disabled".equals(state)) {

Â  Â  Â  Â  Â  Â  icon = StringUtils.isEmpty(stateIcon) ? "" : stateIcon;

Â  Â  Â  Â  Â  Â  addAttr += " disabled='disabled' ";

Â  Â  Â  Â  }

Â  Â  Â  Â  // í´ë˜ìŠ¤ ì„¤ì •

Â  Â  Â  Â  if (StringUtils.isEmpty(className) || "default".equals(className)) className = "";

Â  Â  Â  Â  else className = "has-" + className;

Â  Â  Â  Â  result += " Â  Â  Â  Â  Â  Â <div class=\"form-group no-margin no-padding width_half " + className + "\"> \n";

Â  Â  Â  Â  result += " Â  Â  Â  Â  Â  Â  Â  Â <label class=\"control-label text-right\">" + caption + "</label> \n";

Â  Â  Â  Â  result += " Â  Â  Â  Â  Â  Â  Â  Â <div class=\"inputGroupContainer label-attached\"> \n";

Â  Â  Â  Â  result += " Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div class=\"input-group\"> \n";

Â  Â  Â  Â  // ìë™ì™„ì„± íƒ€ì… ì²˜ë¦¬

Â  Â  Â  Â  if ("autocomplete".equals(type)) {

Â  Â  Â  Â  Â  Â  result += " Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <input type=\"text\" name=\"" + id + "\" id=\"" + id + "\" value=\"" + value + "\" autocomplete=\"off\" class=\"form-control basicAutoComplete " + addClassName + " \" " + addAttr + " data-code=\"" + code + "\" data-query-id=\"" + queryId + "\" > \n";

Â  Â  Â  Â  Â  Â  result += " Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <input type=\"hidden\" name=\"" + code + "\" id=\"" + code + "\" Â > \n";

Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  result += " Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <input name=\"" + id + "\" id=\"" + id + "\" class=\"form-control " + addClassName + "\" type=\"text\" value=\"" + value + "\" " + addAttr + " /> \n";

Â  Â  Â  Â  }

Â  Â  Â  Â  // ë²„íŠ¼ ì¶”ê°€

Â  Â  Â  Â  if(!StringUtils.isEmpty(btnId)) {

Â  Â  Â  Â  Â  Â  result += " Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class=\"input-group-btn\"> \n";

Â  Â  Â  Â  Â  Â  result += " Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <button id=\"" + btnId + "\" type=\"button\" name=\"" + btnId + "\" class=\"btn btn-sm btn-" + btnClass + "\">" + btnCaption + "</button> \n";

Â  Â  Â  Â  Â  Â  result += " Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </span> \n";

Â  Â  Â  Â  }

Â  Â  Â  Â  result += " Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div> \n";

Â  Â  Â  Â  result += " Â  Â  Â  Â  Â  Â  Â  Â </div> \n";

Â  Â  Â  Â  result += " Â  Â  Â  Â  Â  Â </div> \n";

Â  Â  Â  Â  out.print(result);

Â  Â  }

}

```

  

#### 1.3 ì‹¤ì œ ì‚¬ìš© ì˜ˆì‹œ

  

**JSPì—ì„œì˜ íƒœê·¸ ì‚¬ìš©ë²•**

```jsp

<%@ taglib prefix="form" uri="http://wnpsoft.co.kr/jsp/jstl/form" %>

<%@ taglib prefix="label" uri="http://wnpsoft.co.kr/jsp/jstl/label" %>

<%@ taglib prefix="card" uri="http://wnpsoft.co.kr/jsp/jstl/card" %>

<%@ taglib prefix="func" uri="http://wnpsoft.co.kr/jsp/jstl/func" %>

  

<!-- ì¹´ë“œ ì»´í¬ë„ŒíŠ¸ ì‚¬ìš© -->

<card:open title="ì‚¬ìš©ì ì •ë³´" contents="ì‚¬ìš©ìì˜ ê¸°ë³¸ ì •ë³´ë¥¼ ì…ë ¥í•˜ì„¸ìš”">

Â  Â  <!-- ì¹´ë“œ ë‚´ìš© -->

</card:open>

  

<!-- í¼ ê·¸ë¦¬ë“œ ì‚¬ìš© -->

<form:grid id="userGrid" height="400px" style="width:100%;" />

  

<!-- ê²€ìƒ‰ ì¡°ê±´ í¼ -->

<form:input id="userName" caption="ì‚¬ìš©ìëª…" size="3" value="${userName}" />

<form:select id="userRole" caption="ì—­í• " queryId="common.select_userRole" all="true" />

  

<!-- ì¼ë°˜ í¼ ì…ë ¥ -->

<label:input id="userEmail" caption="ì´ë©”ì¼" size="6" icon="fas fa-envelope" />

<label:input id="userPhone" caption="ì „í™”ë²ˆí˜¸" size="6" icon="fas fa-phone" state="readonly" />

  

<!-- ìë™ì™„ì„± ì…ë ¥ -->

<label:input id="companyName" caption="íšŒì‚¬ëª…" type="autocomplete" code="companyCode" queryId="common.select_companyList" />

  

<!-- í•¨ìˆ˜ ì‚¬ìš© -->

<script>

Â  Â  var roleData = ${func:codeToJSON(pageContext, 'USER_ROLE')};

Â  Â  var langData = ${func:langToJSON(pageContext)};

</script>

```

  

#### 1.4 ì¬ì‚¬ìš©ì„± íŠ¹ì§•

- **ì¼ê´€ëœ ìŠ¤íƒ€ì¼ë§**: Bootstrap ê¸°ë°˜ ë°˜ì‘í˜• ë””ìì¸

- **ë™ì  ë°ì´í„° ë°”ì¸ë”©**: queryIdë¥¼ í†µí•œ ì‹¤ì‹œê°„ ë°ì´í„° ë¡œë”©

- **ìƒíƒœ ê´€ë¦¬**: readonly, disabled ë“± ë‹¤ì–‘í•œ ìƒíƒœ ì§€ì›

- **í™•ì¥ì„±**: addClassName, addAttr ë“±ì„ í†µí•œ ì»¤ìŠ¤í„°ë§ˆì´ì§•

- **ìë™ ë³€í™˜**: ê³µí†µì½”ë“œ(#) ì ‘ë‘ì‚¬ë¡œ ìë™ ê³µí†µì½”ë“œ ì¡°íšŒ

- **ìœ ì—°í•œ ë ˆì´ì•„ì›ƒ**: size ì†ì„±ìœ¼ë¡œ Bootstrap ê·¸ë¦¬ë“œ í™œìš©

  

### 2. ë™ì  ë¼ìš°íŠ¸ ì²˜ë¦¬ ì‹œìŠ¤í…œ

  

#### 2.1 ë¼ìš°íŠ¸ ë§¤í•‘ êµ¬ì¡°

```java

/**

Â * ë™ì  ë¼ìš°íŠ¸ ì²˜ë¦¬ë¥¼ ìœ„í•œ SiteController

Â * URL íŒ¨í„´ì— ë”°ë¼ ìë™ìœ¼ë¡œ JSP ë·°ë¥¼ ë§¤í•‘í•˜ëŠ” ì‹œìŠ¤í…œ

Â */

@Controller

public class SiteController {

  

Â  Â  @Resource(name = "commonService")

Â  Â  private final CommonService commonService;

Â  Â  /**

Â  Â  Â * 2ë‹¨ê³„ ë™ì  ë¼ìš°íŠ¸ ì²˜ë¦¬: /{route1}/{route2}.do

Â  Â  Â * @param route1: ì²« ë²ˆì§¸ ê²½ë¡œ (ëª¨ë“ˆëª…)

Â  Â  Â * @param route2: ë‘ ë²ˆì§¸ ê²½ë¡œ (ê¸°ëŠ¥ëª…)

Â  Â  Â * @param session: HTTP ì„¸ì…˜

Â  Â  Â * @param model: Spring MVC ëª¨ë¸

Â  Â  Â * @return JSP ë·° ê²½ë¡œ

Â  Â  Â */

Â  Â  @RequestMapping(value = "/{route1}/{route2}.do", method = RequestMethod.GET)

Â  Â  public String route(@PathVariable("route1") String route1,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  @PathVariable("route2") String route2,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  HttpSession session, Model model) {

Â  Â  Â  Â  String url = String.format("/%s/%s.do", route1, route2);

Â  Â  Â  Â  CommonMap param = MapUtils.parseSession(session);

Â  Â  Â  Â  // ê¶Œí•œ ê²€ì¦

Â  Â  Â  Â  List<CommonMap> authList = AuthUtils.getList(param, url);

Â  Â  Â  Â  if (authList.size() > 0) {

Â  Â  Â  Â  Â  Â  session.setAttribute("user_menu_auth", authList);

Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  String menuUrl = "";

Â  Â  Â  Â  Â  Â  // ëŒ€ì²´ URL ê¶Œí•œ ê²€ì¦

Â  Â  Â  Â  Â  Â  if (!StringUtils.isEmpty(menuUrl)) {

Â  Â  Â  Â  Â  Â  Â  Â  authList = AuthUtils.getList(param, menuUrl);

Â  Â  Â  Â  Â  Â  Â  Â  if (authList.size() > 0) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  session.setAttribute("user_menu_auth", authList);

Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return "redirect:/";

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  return "redirect:/";

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }

Â  Â  Â  Â  // ë©”ë‰´ ì •ë³´ ì„¤ì •

Â  Â  Â  Â  menu(session, model, url);

Â  Â  Â  Â  model.addAttribute("user_id", session.getAttribute("user_id"));

Â  Â  Â  Â  model.addAttribute("user_name", session.getAttribute("user_name"));

Â  Â  Â  Â  return String.format("/proj/%s/%s", route1, route2);

Â  Â  }

Â  Â  /**

Â  Â  Â * íƒœë¸”ë¦¿ ì „ìš© ë¼ìš°íŠ¸: /tablet/{route1}.do

Â  Â  Â * @param route1: íƒœë¸”ë¦¿ ê¸°ëŠ¥ëª…

Â  Â  Â * @param session: HTTP ì„¸ì…˜

Â  Â  Â * @param model: Spring MVC ëª¨ë¸

Â  Â  Â * @return íƒœë¸”ë¦¿ JSP ë·° ê²½ë¡œ

Â  Â  Â */

Â  Â  @RequestMapping(value = "/tablet/{route1}.do", method = RequestMethod.GET)

Â  Â  public String routeTablet(@PathVariable("route1") String route1,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  HttpSession session, Model model) {

Â  Â  Â  Â  String url = String.format("/tablet/%s.do", route1);

Â  Â  Â  Â  CommonMap param = MapUtils.parseSession(session);

Â  Â  Â  Â  // íƒœë¸”ë¦¿ìš© ë‚ ì§œ ì„¤ì • (ìµœê·¼ 7ì¼)

Â  Â  Â  Â  Date today = new Date();

Â  Â  Â  Â  SimpleDateFormat date = new SimpleDateFormat("yyyy-MM-dd");

Â  Â  Â  Â  String endDate = date.format(today);

Â  Â  Â  Â  Calendar mon = Calendar.getInstance();

Â  Â  Â  Â  mon.add(Calendar.DATE, -7);

Â  Â  Â  Â  String startDate = new java.text.SimpleDateFormat("yyyy-MM-dd").format(mon.getTime());

Â  Â  Â  Â  menu(session, model, url);

Â  Â  Â  Â  model.addAttribute("user_id", session.getAttribute("user_id"));

Â  Â  Â  Â  model.addAttribute("user_name", session.getAttribute("user_name"));

Â  Â  Â  Â  model.addAttribute("startDate", startDate);

Â  Â  Â  Â  model.addAttribute("endDate", endDate);

Â  Â  Â  Â  return String.format("/tablet/%s", route1);

Â  Â  }

Â  Â  /**

Â  Â  Â * íŒì—… ë¼ìš°íŠ¸: /pop/{route1}/{route2}.do

Â  Â  Â * @param route1: ëª¨ë“ˆëª…

Â  Â  Â * @param route2: íŒì—…ëª…

Â  Â  Â * @param session: HTTP ì„¸ì…˜

Â  Â  Â * @param model: Spring MVC ëª¨ë¸

Â  Â  Â * @return íŒì—… JSP ë·° ê²½ë¡œ

Â  Â  Â */

Â  Â  @RequestMapping(value = "/pop/{route1}/{route2}.do", method = RequestMethod.GET)

Â  Â  public String popRoute(@PathVariable("route1") String route1,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  @PathVariable("route2") String route2,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  HttpSession session, Model model) {

Â  Â  Â  Â  model.addAttribute("menu_group", route1);

Â  Â  Â  Â  return String.format("/proj/pop/%s/%s", route1, route2);

Â  Â  }

Â  Â  /**

Â  Â  Â * ê´€ë¦¬ì ë¼ìš°íŠ¸: /manage/{route1}.do

Â  Â  Â * @param route1: ê´€ë¦¬ ê¸°ëŠ¥ëª…

Â  Â  Â * @param session: HTTP ì„¸ì…˜

Â  Â  Â * @param model: Spring MVC ëª¨ë¸

Â  Â  Â * @return ê´€ë¦¬ì JSP ë·° ê²½ë¡œ

Â  Â  Â */

Â  Â  @RequestMapping(value = "/manage/{route1}.do", method = RequestMethod.GET)

Â  Â  public String manage(@PathVariable("route1") String route1,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  HttpSession session, Model model) {

Â  Â  Â  Â  String url = String.format("/manage/%s.do", route1);

Â  Â  Â  Â  CommonMap param = MapUtils.parseSession(session);

Â  Â  Â  Â  List<CommonMap> authList = AuthUtils.getList(param, url);

Â  Â  Â  Â  if (authList.size() > 0) {

Â  Â  Â  Â  Â  Â  session.setAttribute("user_menu_auth", authList);

Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  return "redirect:/";

Â  Â  Â  Â  }

Â  Â  Â  Â  menu(session, model, "/manage/"+route1+".do");

Â  Â  Â  Â  model.addAttribute("user_id", session.getAttribute("user_id"));

Â  Â  Â  Â  model.addAttribute("user_name", session.getAttribute("user_name"));

Â  Â  Â  Â  // ê´€ë¦¬ ê¸°ëŠ¥ë³„ ë·° ë¶„ê¸°

Â  Â  Â  Â  if(route1.contains("code")) {

Â  Â  Â  Â  Â  Â  return "/proj/manage/codeManage";

Â  Â  Â  Â  } else if(route1.contains("role")) {

Â  Â  Â  Â  Â  Â  return "/proj/manage/roleManage";

Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  return "/core/index";

Â  Â  Â  Â  }

Â  Â  }

Â  Â  /**

Â  Â  Â * ë©”ë‰´ ì •ë³´ ì„¤ì • ë©”ì„œë“œ

Â  Â  Â * @param session: HTTP ì„¸ì…˜

Â  Â  Â * @param model: Spring MVC ëª¨ë¸

Â  Â  Â * @param url: í˜„ì¬ URL

Â  Â  Â */

Â  Â  private void menu(HttpSession session, Model model, String url) {

Â  Â  Â  Â  CommonMap param = MapUtils.parseSession(session);

Â  Â  Â  Â  List<CommonMap> menuList = new ArrayList<CommonMap>();

Â  Â  Â  Â  List<CommonMap> topMenuList = new ArrayList<CommonMap>();

Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  param.put("queryId", "common.select_menu");

Â  Â  Â  Â  Â  Â  menuList = commonService.select(param);

Â  Â  Â  Â  Â  Â  boolean isFound = false;

  

Â  Â  Â  Â  Â  Â  for (int i=0; i<menuList.size(); i++) {

Â  Â  Â  Â  Â  Â  Â  Â  CommonMap menu = menuList.get(i);

Â  Â  Â  Â  Â  Â  Â  Â  if (menu.getInt("menuDepth") == 1) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!isFound) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  model.addAttribute("topMenuId", menu.getString("menuId"));

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  topMenuList.add(menu);

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  if (isFound) continue;

Â  Â  Â  Â  Â  Â  Â  Â  if (url.equals(menu.getString("menuUrl")) && menu.has("menuUrl")) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  model.addAttribute("menuName", menu.getString("menuName"));

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  model.addAttribute("menuStr", menu.getString("menuNameStr"));

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  model.addAttribute("menuId", menu.getString("menuId"));

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  model.addAttribute("parentMenuId", menu.getString("parentMenuId"));

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  model.addAttribute("codeId", menu.getString("codeId"));

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isFound = true;

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (!isFound) {

Â  Â  Â  Â  Â  Â  Â  Â  model.addAttribute("menuName", "");

Â  Â  Â  Â  Â  Â  Â  Â  model.addAttribute("topMenuId", 0);

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  model.addAttribute("menuList", menuList);

Â  Â  Â  Â  Â  Â  model.addAttribute("topMenuList", topMenuList);

Â  Â  Â  Â  } catch (Exception e) {

Â  Â  Â  Â  Â  Â  // ë©”ë‰´ ì¡°íšŒ ì‹¤íŒ¨ ì‹œ ê¸°ë³¸ê°’ ì„¤ì •

Â  Â  Â  Â  }

Â  Â  }

}

```

  

#### 2.2 ë¼ìš°íŠ¸ ì²˜ë¦¬ íŠ¹ì§•

- **íŒ¨í„´ ê¸°ë°˜ ë§¤í•‘**: URL íŒ¨í„´ì— ë”°ë¥¸ ìë™ ë·° ë§¤í•‘

- **ê¶Œí•œ í†µí•© ê´€ë¦¬**: AuthUtilsë¥¼ í†µí•œ ì¤‘ì•™í™”ëœ ê¶Œí•œ ê²€ì¦

- **ë©”ë‰´ ìë™ ì²˜ë¦¬**: menu() ë©”ì„œë“œë¥¼ í†µí•œ ì¼ê´€ëœ ë©”ë‰´ ì²˜ë¦¬

- **ë‹¤ì¤‘ ë””ë°”ì´ìŠ¤ ì§€ì›**: íƒœë¸”ë¦¿, ì›¹ ë“± ë‹¤ì–‘í•œ ë””ë°”ì´ìŠ¤ ëŒ€ì‘

- **íŒì—… ì§€ì›**: ë³„ë„ì˜ íŒì—… ë¼ìš°íŠ¸ ì²˜ë¦¬

- **ê´€ë¦¬ì ê¸°ëŠ¥**: ê´€ë¦¬ì ì „ìš© ë¼ìš°íŠ¸ ë° ê¶Œí•œ ì²˜ë¦¬

  

### 3. CommonMap ë°ì´í„° ì²˜ë¦¬ ì‹œìŠ¤í…œ

  

#### 3.1 CommonMap í´ë˜ìŠ¤ êµ¬ì¡°

```java

/**

Â * í†µí•© ë°ì´í„° ì²˜ë¦¬ë¥¼ ìœ„í•œ CommonMap í´ë˜ìŠ¤

Â * ListOrderedMapì„ ìƒì†í•˜ì—¬ ìˆœì„œê°€ ë³´ì¥ë˜ëŠ” Map ê¸°ëŠ¥ ì œê³µ

Â * ìë™ CamelCase ë³€í™˜ ë° íƒ€ì… ì•ˆì „í•œ ë°ì´í„° ì ‘ê·¼ ì§€ì›

Â */

public final class CommonMap extends ListOrderedMap {

Â  Â  private static final long serialVersionUID = -5612938228459808005L;

Â  Â  private static final String ignoreName = "state_col,"; // CamelCase ë³€í™˜ ì œì™¸ í•„ë“œ

  

Â  Â  public CommonMap() {}

Â  Â  public CommonMap(String key, Object value) {

Â  Â  Â  Â  this.put(key, value);

Â  Â  }

Â  Â  /**

Â  Â  Â * ë¬¸ìì—´ ë°ì´í„° ì•ˆì „ ì ‘ê·¼ (ê¸°ë³¸ê°’ í¬í•¨)

Â  Â  Â * @param name: í•„ë“œëª…

Â  Â  Â * @param def: ê¸°ë³¸ê°’

Â  Â  Â * @return ë¬¸ìì—´ ê°’

Â  Â  Â */

Â  Â  public String getString(String name, String def) {

Â  Â  Â  Â  Object obj = get(name);

Â  Â  Â  Â  if (obj == null) {

Â  Â  Â  Â  Â  Â  return def;

Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  if(obj instanceof String[]) {

Â  Â  Â  Â  Â  Â  Â  Â  return ((String[]) obj)[0]; // ë°°ì—´ì˜ ì²« ë²ˆì§¸ ê°’ ë°˜í™˜

Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  return obj.toString();

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }

Â  Â  }

Â  Â  /**

Â  Â  Â * ë¬¸ìì—´ ë°ì´í„° ì•ˆì „ ì ‘ê·¼ (ê¸°ë³¸ê°’: ë¹ˆ ë¬¸ìì—´)

Â  Â  Â * @param name: í•„ë“œëª…

Â  Â  Â * @return ë¬¸ìì—´ ê°’

Â  Â  Â */

Â  Â  public String getString(String name) {

Â  Â  Â  Â  return getString(name, "");

Â  Â  }

Â  Â  /**

Â  Â  Â * í•„ë“œ ì¡´ì¬ ì—¬ë¶€ í™•ì¸

Â  Â  Â * @param name: í•„ë“œëª…

Â  Â  Â * @return ì¡´ì¬ ì—¬ë¶€

Â  Â  Â */

Â  Â  public boolean has(String name) {

Â  Â  Â  Â  return get(name) != null;

Â  Â  }

  

Â  Â  /**

Â  Â  Â * í•„ë“œê°€ ë¹„ì–´ìˆëŠ”ì§€ í™•ì¸

Â  Â  Â * @param name: í•„ë“œëª…

Â  Â  Â * @return ë¹„ì–´ìˆìŒ ì—¬ë¶€

Â  Â  Â */

Â  Â  public boolean isEmpty(String name) {

Â  Â  Â  Â  return StringUtils.isEmpty(getString(name, ""));

Â  Â  }

Â  Â  /**

Â  Â  Â * ì¤‘ì²© ë§µ ì²˜ë¦¬ (CommonMap ë°˜í™˜)

Â  Â  Â * @param name: í•„ë“œëª…

Â  Â  Â * @return CommonMap ê°ì²´

Â  Â  Â */

Â  Â  public CommonMap getMap(String name) {

Â  Â  Â  Â  Object obj = get(name);

  

Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  if (obj == null) {

Â  Â  Â  Â  Â  Â  Â  Â  return new CommonMap();

Â  Â  Â  Â  Â  Â  } else if (obj instanceof LinkedHashMap) {

Â  Â  Â  Â  Â  Â  Â  Â  return CommonMap.parse((LinkedHashMap<String, Object>) obj);

Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  return (CommonMap) obj;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  } catch (Exception e) {

Â  Â  Â  Â  Â  Â  return new CommonMap();

Â  Â  Â  Â  }

Â  Â  }

Â  Â  /**

Â  Â  Â * ì¸ë±ìŠ¤ ê¸°ë°˜ ë§µ ì ‘ê·¼

Â  Â  Â * @param idx: ì¸ë±ìŠ¤

Â  Â  Â * @return CommonMap ê°ì²´

Â  Â  Â */

Â  Â  public CommonMap getMap(int idx) {

Â  Â  Â  Â  Object obj = getValue(idx);

  

Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  if (obj == null) {

Â  Â  Â  Â  Â  Â  Â  Â  return new CommonMap();

Â  Â  Â  Â  Â  Â  } else if (obj instanceof LinkedHashMap) {

Â  Â  Â  Â  Â  Â  Â  Â  return CommonMap.parse((LinkedHashMap<String, Object>) obj);

Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  return (CommonMap) obj;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  } catch (Exception e) {

Â  Â  Â  Â  Â  Â  return new CommonMap();

Â  Â  Â  Â  }

Â  Â  }

Â  Â  /**

Â  Â  Â * ë¦¬ìŠ¤íŠ¸ ë°ì´í„° ì ‘ê·¼

Â  Â  Â * @param name: í•„ë“œëª…

Â  Â  Â * @return CommonMap ë¦¬ìŠ¤íŠ¸

Â  Â  Â */

Â  Â  public List<CommonMap> getList(String name) {

Â  Â  Â  Â  Object obj = get(name);

  

Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  if (obj == null) {

Â  Â  Â  Â  Â  Â  Â  Â  return new ArrayList<CommonMap>();

Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  if (((List) obj).size() > 0 && ((List) obj).get(0) instanceof LinkedHashMap) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  List<CommonMap> result = new ArrayList<CommonMap>();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  List<LinkedHashMap<String, Object>> temp = (List<LinkedHashMap<String, Object>>) obj;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  for(int i=0; i<temp.size(); i++) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  result.add(CommonMap.parse(temp.get(i)));

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return result;

Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return (List<CommonMap>) obj;

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  } catch (Exception e) {

Â  Â  Â  Â  Â  Â  e.printStackTrace();

Â  Â  Â  Â  Â  Â  return new ArrayList<CommonMap>();

Â  Â  Â  Â  }

Â  Â  }

Â  Â  /**

Â  Â  Â * ë¶ˆë¦° ë°ì´í„° ì ‘ê·¼

Â  Â  Â * @param name: í•„ë“œëª…

Â  Â  Â * @return ë¶ˆë¦° ê°’

Â  Â  Â */

Â  Â  public boolean getBoolean(String name) {

Â  Â  Â  Â  Object obj = get(name);

  

Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  if (obj instanceof Boolean) {

Â  Â  Â  Â  Â  Â  Â  Â  return (boolean) obj;

Â  Â  Â  Â  Â  Â  } else if (obj instanceof String) {

Â  Â  Â  Â  Â  Â  Â  Â  return Boolean.parseBoolean(obj.toString());

Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  return false;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  } catch (Exception e) {

Â  Â  Â  Â  Â  Â  return false;

Â  Â  Â  Â  }

Â  Â  }

Â  Â  /**

Â  Â  Â * ì •ìˆ˜ ë°ì´í„° ì ‘ê·¼ (ê¸°ë³¸ê°’ í¬í•¨)

Â  Â  Â * @param name: í•„ë“œëª…

Â  Â  Â * @param def: ê¸°ë³¸ê°’

Â  Â  Â * @return ì •ìˆ˜ ê°’

Â  Â  Â */

Â  Â  public int getInt(String name, int def) {

Â  Â  Â  Â  Object obj = get(name);

Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  if (obj instanceof Integer) {

Â  Â  Â  Â  Â  Â  Â  Â  return (int) obj;

Â  Â  Â  Â  Â  Â  } else if (obj instanceof String) {

Â  Â  Â  Â  Â  Â  Â  Â  return Integer.parseInt(obj.toString());

Â  Â  Â  Â  Â  Â  } else if (obj instanceof BigDecimal) {

Â  Â  Â  Â  Â  Â  Â  Â  return ((BigDecimal) obj).intValue();

Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  return def;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  } catch (Exception e) {

Â  Â  Â  Â  Â  Â  return def;

Â  Â  Â  Â  }

Â  Â  }

Â  Â  /**

Â  Â  Â * ì •ìˆ˜ ë°ì´í„° ì ‘ê·¼ (ê¸°ë³¸ê°’: 0)

Â  Â  Â * @param name: í•„ë“œëª…

Â  Â  Â * @return ì •ìˆ˜ ê°’

Â  Â  Â */

Â  Â  public int getInt(String name) {

Â  Â  Â  Â  return getInt(name, 0);

Â  Â  }

Â  Â  /**

Â  Â  Â * ì‹¤ìˆ˜ ë°ì´í„° ì ‘ê·¼ (ê¸°ë³¸ê°’ í¬í•¨)

Â  Â  Â * @param name: í•„ë“œëª…

Â  Â  Â * @param def: ê¸°ë³¸ê°’

Â  Â  Â * @return ì‹¤ìˆ˜ ê°’

Â  Â  Â */

Â  Â  public double getDouble(String name, double def) {

Â  Â  Â  Â  Object obj = get(name);

Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  if (obj instanceof Integer) {

Â  Â  Â  Â  Â  Â  Â  Â  return (double) obj;

Â  Â  Â  Â  Â  Â  } else if (obj instanceof String) {

Â  Â  Â  Â  Â  Â  Â  Â  return Double.parseDouble(obj.toString());

Â  Â  Â  Â  Â  Â  } else if (obj instanceof BigDecimal) {

Â  Â  Â  Â  Â  Â  Â  Â  return ((BigDecimal) obj).doubleValue();

Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  return def;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  } catch (Exception e) {

Â  Â  Â  Â  Â  Â  return def;

Â  Â  Â  Â  }

Â  Â  }

Â  Â  /**

Â  Â  Â * ì‹¤ìˆ˜ ë°ì´í„° ì ‘ê·¼ (ê¸°ë³¸ê°’: 0.0)

Â  Â  Â * @param name: í•„ë“œëª…

Â  Â  Â * @return ì‹¤ìˆ˜ ê°’

Â  Â  Â */

Â  Â  public double getDouble(String name) {

Â  Â  Â  Â  return getDouble(name, 0);

Â  Â  }

Â  Â  /**

Â  Â  Â * ìë™ CamelCase ë³€í™˜ì„ í†µí•œ ë°ì´í„° ì €ì¥

Â  Â  Â * @param key: í‚¤

Â  Â  Â * @param value: ê°’

Â  Â  Â * @return ì €ì¥ëœ ê°’

Â  Â  Â */

Â  Â  @Override

Â  Â  public Object put(Object key, Object value) {

Â  Â  Â  Â  if (key instanceof String) {

Â  Â  Â  Â  Â  Â  String k = ((String) key).toLowerCase();

Â  Â  Â  Â  Â  Â  // íŠ¹ì • í•„ë“œëŠ” CamelCase ë³€í™˜ ì œì™¸

Â  Â  Â  Â  Â  Â  if (ignoreName.indexOf(k + ",") > -1) {

Â  Â  Â  Â  Â  Â  Â  Â  return super.put(k, value);

Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  return super.put(CamelUtil.convert2CamelCase((String) key), value);

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  return super.put(key, value);

Â  Â  Â  Â  }

Â  Â  }

  

Â  Â  /**

Â  Â  Â * LinkedHashMapì„ CommonMapìœ¼ë¡œ ë³€í™˜

Â  Â  Â * @param map: ë³€í™˜í•  ë§µ

Â  Â  Â * @return CommonMap ê°ì²´

Â  Â  Â */

Â  Â  public static CommonMap parse(LinkedHashMap<String, Object> map) {

Â  Â  Â  Â  CommonMap result = new CommonMap();

Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  Iterator<String> keyData = map.keySet().iterator();

Â  Â  Â  Â  Â  Â  while (keyData.hasNext()) {

Â  Â  Â  Â  Â  Â  Â  Â  String key = keyData.next();

Â  Â  Â  Â  Â  Â  Â  Â  result.put(key, map.get(key));

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  } catch (Exception e) {

Â  Â  Â  Â  Â  Â  return new CommonMap();

Â  Â  Â  Â  }

Â  Â  Â  Â  return result;

Â  Â  }

Â  Â  /**

Â  Â  Â * JSON ë¬¸ìì—´ì„ CommonMapìœ¼ë¡œ ë³€í™˜

Â  Â  Â * @param json: JSON ë¬¸ìì—´

Â  Â  Â * @return CommonMap ê°ì²´

Â  Â  Â */

Â  Â  public static CommonMap parseJSON(String json) {

Â  Â  Â  Â  CommonMap result = new CommonMap();

Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  ObjectMapper mapper = new ObjectMapper();

Â  Â  Â  Â  Â  Â  result = mapper.readValue(json, CommonMap.class);

Â  Â  Â  Â  } catch (Exception e) {

Â  Â  Â  Â  Â  Â  return new CommonMap();

Â  Â  Â  Â  }

Â  Â  Â  Â  return result;

Â  Â  }

}

```

  

#### 3.2 MapUtils ìœ í‹¸ë¦¬í‹°

```java

/**

Â * HTTP ìš”ì²­ ë° ì„¸ì…˜ ë°ì´í„°ë¥¼ CommonMapìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ìœ í‹¸ë¦¬í‹°

Â * ìë™ CamelCase ë³€í™˜ ë° ë°°ì—´ ì²˜ë¦¬ ì§€ì›

Â */

public final class MapUtils {

  

Â  Â  /**

Â  Â  Â * HTTP ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ CommonMapìœ¼ë¡œ ë³€í™˜

Â  Â  Â * @param request: HTTP ìš”ì²­ ê°ì²´

Â  Â  Â * @return CommonMap ê°ì²´

Â  Â  Â */

Â  Â  public static CommonMap parseRequest(HttpServletRequest request) {

Â  Â  Â  Â  CommonMap result = new CommonMap();

Â  Â  Â  Â  String func = request.getParameter("func") == null ? "" : request.getParameter("func");

  

Â  Â  Â  Â  Enumeration<String> e = request.getParameterNames();

Â  Â  Â  Â  List<CommonMap> list = new ArrayList<CommonMap>();

  

Â  Â  Â  Â  // íŠ¹ìˆ˜ íŒŒë¼ë¯¸í„° ëª©ë¡ (ë¦¬ìŠ¤íŠ¸ ë³µì‚¬ì—ì„œ ì œì™¸)

Â  Â  Â  Â  String _name = "_token,func,queryId,queryOrder,queryKey,keyCol,result,grid,baseData,dataType,objId,reqAction,";

Â  Â  Â  Â  String[] checkbox = request.getParameterValues("checkbox");

  

Â  Â  Â  Â  // ìš”ì²­ íŒŒë¼ë¯¸í„° íŒŒì‹±

Â  Â  Â  Â  while (e.hasMoreElements()) {

Â  Â  Â  Â  Â  Â  String name = (String) e.nextElement();

Â  Â  Â  Â  Â  Â  String[] values = request.getParameterValues(name);

  

Â  Â  Â  Â  Â  Â  if (values != null) {

Â  Â  Â  Â  Â  Â  Â  Â  // ë‹¨ì¼ ê°’ ì²˜ë¦¬

Â  Â  Â  Â  Â  Â  Â  Â  if (values.length == 1 && !name.startsWith("grd_") && !name.endsWith("[]")) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  result.put(name, values[0]);

Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ë°°ì—´ ê°’ ì²˜ë¦¬

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if ((func.startsWith("IQ") || func.startsWith("EX") || func.startsWith("PR")) && checkbox != null) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ì²´í¬ë°•ìŠ¤ ê¸°ë°˜ ì„ íƒ ì²˜ë¦¬

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ArrayList<String> alist = new ArrayList<String>();

  

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  for (int i=0; i < checkbox.length; i++) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  int chkNum = Integer.parseInt(checkbox[i]);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!name.equals("checkbox")) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if(values[chkNum] != null && !values[chkNum].equals(""))

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alist.add(values[chkNum]);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

  

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  result.put(name, alist);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ì¼ë°˜ ë°°ì—´ ì²˜ë¦¬

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if(values.length > 0 && !name.startsWith("grd_")) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ArrayList<String> alist = new ArrayList<String>();

  

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  for (int i=0; i < values.length; i++) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if(values[i] != null && !values[i].equals(""))

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alist.add(values[i]);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

  

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  result.put(reverse2CamelCase(name).replace("[]", ""), alist);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ê·¸ë¦¬ë“œ ë°ì´í„° ì²˜ë¦¬

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  for (int i=0;i<values.length;i++){

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (list.size() <= i || list.get(i) == null){

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  CommonMap t_map = new CommonMap("index", i);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  list.add(t_map);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

  

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  list.get(i).put(reverse2CamelCase(name).replace("[]", ""), values[i]);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }

  

Â  Â  Â  Â  // ì„¸ì…˜ ì •ë³´ ìë™ ì¶”ê°€

Â  Â  Â  Â  HttpSession session = request.getSession();

Â  Â  Â  Â  Enumeration<String> attrNames = session.getAttributeNames();

  

Â  Â  Â  Â  while(attrNames.hasMoreElements()){

Â  Â  Â  Â  Â  Â  String attrName = attrNames.nextElement();

Â  Â  Â  Â  Â  Â  Object attrValue = session.getAttribute(attrName);

Â  Â  Â  Â  Â  Â  result.put(attrName, attrValue);

Â  Â  Â  Â  }

  

Â  Â  Â  Â  // ê·¸ë¦¬ë“œ ë°ì´í„° ì²˜ë¦¬

Â  Â  Â  Â  if (list.size() > 0) {

Â  Â  Â  Â  Â  Â  Iterator iter = result.keySet().iterator();

  

Â  Â  Â  Â  Â  Â  while(iter.hasNext()){

Â  Â  Â  Â  Â  Â  Â  Â  String keyname = (String)iter.next();

Â  Â  Â  Â  Â  Â  Â  Â  if(_name.indexOf(keyname+",")>-1) continue;

  

Â  Â  Â  Â  Â  Â  Â  Â  for(int i=0; i<list.size(); i++){

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  list.get(i).put(keyname, result.get(keyname));

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  }

  

Â  Â  Â  Â  Â  Â  result.put("list", list);

Â  Â  Â  Â  }

  

Â  Â  Â  Â  return result;

Â  Â  }

  

Â  Â  /**

Â  Â  Â * ì„¸ì…˜ ë°ì´í„°ë¥¼ CommonMapìœ¼ë¡œ ë³€í™˜

Â  Â  Â * @param session: HTTP ì„¸ì…˜ ê°ì²´

Â  Â  Â * @return CommonMap ê°ì²´

Â  Â  Â */

Â  Â  public static CommonMap parseSession(HttpSession session) {

Â  Â  Â  Â  CommonMap result = new CommonMap();

Â  Â  Â  Â  Enumeration<String> attrNames = session.getAttributeNames();

  

Â  Â  Â  Â  while(attrNames.hasMoreElements()){

Â  Â  Â  Â  Â  Â  String attrName = attrNames.nextElement();

Â  Â  Â  Â  Â  Â  Object attrValue = session.getAttribute(attrName);

Â  Â  Â  Â  Â  Â  result.put(attrName, attrValue);

Â  Â  Â  Â  }

  

Â  Â  Â  Â  return result;

Â  Â  }

  

Â  Â  /**

Â  Â  Â * CommonMap ë¦¬ìŠ¤íŠ¸ë¥¼ ì¸ë±ìŠ¤ ê¸°ë°˜ CommonMapìœ¼ë¡œ ë³€í™˜

Â  Â  Â * @param list: CommonMap ë¦¬ìŠ¤íŠ¸

Â  Â  Â * @return ì¸ë±ìŠ¤ ê¸°ë°˜ CommonMap

Â  Â  Â */

Â  Â  public static CommonMap parseList(List<CommonMap> list) {

Â  Â  Â  Â  CommonMap result = new CommonMap();

  

Â  Â  Â  Â  if (list == null) return result;

Â  Â  Â  Â  for (int i=0; i<list.size(); i++) {

Â  Â  Â  Â  Â  Â  result.put(i, "" + i, list.get(i));

Â  Â  Â  Â  }

  

Â  Â  Â  Â  return result;

Â  Â  }

  

Â  Â  /**

Â  Â  Â * CamelCaseë¥¼ snake_caseë¡œ ë³€í™˜

Â  Â  Â * @param camel: CamelCase ë¬¸ìì—´

Â  Â  Â * @return snake_case ë¬¸ìì—´

Â  Â  Â */

Â  Â  public static String reverse2CamelCase(String camel) {

Â  Â  Â  Â  String regex = "([a-z])([A-Z]+)";

Â  Â  Â  Â  String replacement = "$1_$2";

  

Â  Â  Â  Â  return camel.replaceAll(regex, replacement).toLowerCase();

Â  Â  }

}

```

  

#### 3.3 ì‹¤ì œ ì‚¬ìš© ì˜ˆì‹œ

  

**ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œì˜ CommonMap ì‚¬ìš©**

```java

@RestController

public class CommonController {

  

Â  Â  @Resource(name = "commonService")

Â  Â  private CommonService commonService;

  

Â  Â  /**

Â  Â  Â * ê³µí†µ select ì²˜ë¦¬

Â  Â  Â * @param request: HTTP ìš”ì²­

Â  Â  Â * @return CommonMap ë¦¬ìŠ¤íŠ¸

Â  Â  Â */

Â  Â  @RequestMapping(value = "/common_select.do", method = RequestMethod.POST)

Â  Â  public List<CommonMap> select(HttpServletRequest request) throws Exception {

Â  Â  Â  Â  List<CommonMap> result = new ArrayList<CommonMap>();

Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  // ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ CommonMapìœ¼ë¡œ ë³€í™˜

Â  Â  Â  Â  Â  Â  CommonMap param = MapUtils.parseRequest(request);

Â  Â  Â  Â  Â  Â  // ë™ì  ì¿¼ë¦¬ ì‹¤í–‰

Â  Â  Â  Â  Â  Â  result = commonService.select(param);

Â  Â  Â  Â  } catch (Exception e) {

Â  Â  Â  Â  Â  Â  e.printStackTrace();

Â  Â  Â  Â  }

Â  Â  Â  Â  return result;

Â  Â  }

  

Â  Â  /**

Â  Â  Â * ê³µí†µ insert/update/delete ì²˜ë¦¬

Â  Â  Â * @param request: HTTP ìš”ì²­

Â  Â  Â * @return ì²˜ë¦¬ ê²°ê³¼

Â  Â  Â */

Â  Â  @RequestMapping(value = "/common_insert.do", method = RequestMethod.POST)

Â  Â  public ResultInfo insert(HttpServletRequest request) throws Exception {

Â  Â  Â  Â  String msg = "";

Â  Â  Â  Â  int result = 0;

Â  Â  Â  Â  CommonMap data = new CommonMap();

Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  CommonMap param = MapUtils.parseRequest(request);

Â  Â  Â  Â  Â  Â  List<CommonMap> list = param.getList("list");

Â  Â  Â  Â  Â  Â  boolean isGrid = false;

Â  Â  Â  Â  Â  Â  int success = 0;

Â  Â  Â  Â  Â  Â  int total = 0;

Â  Â  Â  Â  Â  Â  if (list.size() == 0) {

Â  Â  Â  Â  Â  Â  Â  Â  // ë‹¨ì¼ ë°ì´í„° ì²˜ë¦¬

Â  Â  Â  Â  Â  Â  Â  Â  total = 1;

Â  Â  Â  Â  Â  Â  Â  Â  // í‚¤ ìƒì„±ì´ í•„ìš”í•œ ê²½ìš°

Â  Â  Â  Â  Â  Â  Â  Â  if (param.getString("func").startsWith("IS") && param.has("queryKey")) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  CommonMap keyParam = MapUtils.parseRequest(request);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  keyParam.put("queryId", param.getString("queryKey"));

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  CommonMap keyMap = commonService.selectOne(keyParam);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!keyMap.has(param.getString("keyCol"))) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  throw new NotFoundException("keyColì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  param.put(param.getString("keyCol"), keyMap.getString(param.getString("keyCol")));

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  // CRUD ì‘ì—… ì‹¤í–‰

Â  Â  Â  Â  Â  Â  Â  Â  if (param.getString("func").startsWith("IS")) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  success = commonService.insert(param);

Â  Â  Â  Â  Â  Â  Â  Â  } else if (param.getString("func").startsWith("UP")) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  success = commonService.update(param);

Â  Â  Â  Â  Â  Â  Â  Â  } else if (param.getString("func").startsWith("DL")) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  success = commonService.delete(param);

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  // ê·¸ë¦¬ë“œ ë°ì´í„° ì²˜ë¦¬

Â  Â  Â  Â  Â  Â  Â  Â  String queryId = param.getString("queryId").substring(param.getString("queryId").lastIndexOf(".") + 1);

Â  Â  Â  Â  Â  Â  Â  Â  String nameSpace = param.getString("queryId").replace(queryId, "");

Â  Â  Â  Â  Â  Â  Â  Â  for(int idx=0; idx<list.size(); idx++) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  CommonMap item = list.get(idx);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  String stateCol = item.getString("grdStateCol");

  

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  item.put("queryId", queryId);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  item.put("nameSpace", nameSpace);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  total++;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (item.isEmpty("grdStateCol")) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  success++;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ìƒíƒœë³„ ì²˜ë¦¬

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  switch (stateCol) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  case "C" :

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  success += isGrid ? commonService.gridInsert(item) : commonService.insert(item);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  case "U" :

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  success += isGrid ? commonService.gridUpdate(item) : commonService.update(item);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  case "D" :

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  success += isGrid ? commonService.gridDelete(item) : commonService.delete(item);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  msg = String.format("ì²˜ë¦¬ ì™„ë£Œ: %d/%d", success, total);

Â  Â  Â  Â  Â  Â  data.put("success", success);

Â  Â  Â  Â  Â  Â  data.put("total", total);

Â  Â  Â  Â  } catch (Exception e) {

Â  Â  Â  Â  Â  Â  msg = "ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage();

Â  Â  Â  Â  Â  Â  e.printStackTrace();

Â  Â  Â  Â  }

Â  Â  Â  Â  return ResultInfo.of(msg, result, data);

Â  Â  }

}

```

  

### 4. ë™ì  ì¿¼ë¦¬ ì²˜ë¦¬ ì‹œìŠ¤í…œ

  

#### 4.1 CommonService êµ¬ì¡°

```java

/**

Â * ë™ì  ì¿¼ë¦¬ ì²˜ë¦¬ë¥¼ ìœ„í•œ CommonService êµ¬í˜„ì²´

Â * ëŸ°íƒ€ì„ì— queryIdë¥¼ ê¸°ë°˜ìœ¼ë¡œ MyBatis ë§¤í¼ë¥¼ ë™ì  ì‹¤í–‰

Â * ë‹¤ì¤‘ ì¿¼ë¦¬ ì‹¤í–‰ ë° ê·¸ë¦¬ë“œ ë°ì´í„° ì²˜ë¦¬ ì§€ì›

Â */

@Service("commonService")

public class CommonServiceImpl implements CommonService {

  

Â  Â  @Resource(name = "commonRepository")

Â  Â  private CommonRepository commonRepository;

Â  Â  private final String NAMESPACE = "kr.co.wnpsoft.core.mapper.";

Â  Â  private final String QUERYID_NOT_FOUND = "queryIdê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤!";

Â  Â  private final int MAX_QUERY_COUNT = 10; // ìµœëŒ€ ì¿¼ë¦¬ ì‹¤í–‰ íšŸìˆ˜

  

Â  Â  /**

Â  Â  Â * ë™ì  select ì²˜ë¦¬ (queryId ê¸°ë°˜)

Â  Â  Â * @param queryId: ì¿¼ë¦¬ ID

Â  Â  Â * @param param: íŒŒë¼ë¯¸í„°

Â  Â  Â * @return CommonMap ë¦¬ìŠ¤íŠ¸

Â  Â  Â * @throws Exception

Â  Â  Â */

Â  Â  public List<CommonMap> select(String queryId, CommonMap param) throws Exception {

Â  Â  Â  Â  if (StringUtils.isEmpty(queryId)) throw new NotFoundException(QUERYID_NOT_FOUND);

Â  Â  Â  Â  return commonRepository.selectList(NAMESPACE + queryId, param);

Â  Â  }

  

Â  Â  /**

Â  Â  Â * ë™ì  select ì²˜ë¦¬ (CommonMap ë‚´ queryId ì‚¬ìš©)

Â  Â  Â * @param param: íŒŒë¼ë¯¸í„° (queryId í¬í•¨)

Â  Â  Â * @return CommonMap ë¦¬ìŠ¤íŠ¸

Â  Â  Â * @throws Exception

Â  Â  Â */

Â  Â  public List<CommonMap> select(CommonMap param) throws Exception {

Â  Â  Â  Â  if (StringUtils.isEmpty(param.getString("queryId")))

Â  Â  Â  Â  Â  Â  throw new NotFoundException(QUERYID_NOT_FOUND);

Â  Â  Â  Â  return commonRepository.selectList(NAMESPACE + param.getString("queryId"), param);

Â  Â  }

Â  Â  /**

Â  Â  Â * ë‹¨ì¼ ë ˆì½”ë“œ ì¡°íšŒ

Â  Â  Â * @param param: íŒŒë¼ë¯¸í„° (queryId í¬í•¨)

Â  Â  Â * @return CommonMap ê°ì²´

Â  Â  Â * @throws Exception

Â  Â  Â */

Â  Â  public CommonMap selectOne(CommonMap param) throws Exception {

Â  Â  Â  Â  if (StringUtils.isEmpty(param.getString("queryId")))

Â  Â  Â  Â  Â  Â  throw new NotFoundException(QUERYID_NOT_FOUND);

Â  Â  Â  Â  return commonRepository.selectOne(NAMESPACE + param.getString("queryId"), param);

Â  Â  }

Â  Â  /**

Â  Â  Â * ë™ì  insert ì²˜ë¦¬

Â  Â  Â * @param param: íŒŒë¼ë¯¸í„° (queryId í¬í•¨)

Â  Â  Â * @return ì˜í–¥ë°›ì€ í–‰ ìˆ˜

Â  Â  Â * @throws Exception

Â  Â  Â */

Â  Â  public int insert(CommonMap param) throws Exception {

Â  Â  Â  Â  if (StringUtils.isEmpty(param.getString("queryId")))

Â  Â  Â  Â  Â  Â  throw new NotFoundException(QUERYID_NOT_FOUND);

Â  Â  Â  Â  return insert("", param);

Â  Â  }

Â  Â  /**

Â  Â  Â * ë™ì  update ì²˜ë¦¬

Â  Â  Â * @param param: íŒŒë¼ë¯¸í„° (queryId í¬í•¨)

Â  Â  Â * @return ì˜í–¥ë°›ì€ í–‰ ìˆ˜

Â  Â  Â * @throws Exception

Â  Â  Â */

Â  Â  public int update(CommonMap param) throws Exception {

Â  Â  Â  Â  if (StringUtils.isEmpty(param.getString("queryId")))

Â  Â  Â  Â  Â  Â  throw new NotFoundException(QUERYID_NOT_FOUND);

Â  Â  Â  Â  return update("", param);

Â  Â  }

Â  Â  /**

Â  Â  Â * ë™ì  delete ì²˜ë¦¬

Â  Â  Â * @param param: íŒŒë¼ë¯¸í„° (queryId í¬í•¨)

Â  Â  Â * @return ì˜í–¥ë°›ì€ í–‰ ìˆ˜

Â  Â  Â * @throws Exception

Â  Â  Â */

Â  Â  public int delete(CommonMap param) throws Exception {

Â  Â  Â  Â  if (StringUtils.isEmpty(param.getString("queryId")))

Â  Â  Â  Â  Â  Â  throw new NotFoundException(QUERYID_NOT_FOUND);

Â  Â  Â  Â  return delete("", param);

Â  Â  }

Â  Â  /**

Â  Â  Â * ê·¸ë¦¬ë“œ insert ì²˜ë¦¬

Â  Â  Â * @param param: íŒŒë¼ë¯¸í„° (nameSpace í¬í•¨)

Â  Â  Â * @return ì˜í–¥ë°›ì€ í–‰ ìˆ˜

Â  Â  Â * @throws Exception

Â  Â  Â */

Â  Â  public int gridInsert(CommonMap param) throws Exception {

Â  Â  Â  Â  return insert(param.getString("nameSpace") + "insert_", param);

Â  Â  }

Â  Â  /**

Â  Â  Â * ê·¸ë¦¬ë“œ update ì²˜ë¦¬

Â  Â  Â * @param param: íŒŒë¼ë¯¸í„° (nameSpace í¬í•¨)

Â  Â  Â * @return ì˜í–¥ë°›ì€ í–‰ ìˆ˜

Â  Â  Â * @throws Exception

Â  Â  Â */

Â  Â  public int gridUpdate(CommonMap param) throws Exception {

Â  Â  Â  Â  return update(param.getString("nameSpace") + "update_", param);

Â  Â  }

Â  Â  /**

Â  Â  Â * ê·¸ë¦¬ë“œ delete ì²˜ë¦¬

Â  Â  Â * @param param: íŒŒë¼ë¯¸í„° (nameSpace í¬í•¨)

Â  Â  Â * @return ì˜í–¥ë°›ì€ í–‰ ìˆ˜

Â  Â  Â * @throws Exception

Â  Â  Â */

Â  Â  public int gridDelete(CommonMap param) throws Exception {

Â  Â  Â  Â  return delete(param.getString("nameSpace") + "delete_", param);

Â  Â  }

  

Â  Â  /**

Â  Â  Â * ë‹¤ì¤‘ ì¿¼ë¦¬ insert ì²˜ë¦¬

Â  Â  Â * @param prefix: ì¿¼ë¦¬ ì ‘ë‘ì‚¬

Â  Â  Â * @param param: íŒŒë¼ë¯¸í„°

Â  Â  Â * @return ì˜í–¥ë°›ì€ í–‰ ìˆ˜

Â  Â  Â * @throws Exception

Â  Â  Â */

Â  Â  private int insert(String prefix, CommonMap param) throws Exception {

Â  Â  Â  Â  int result = 0;

  

Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  // ìµœëŒ€ 10ê°œê¹Œì§€ ì¿¼ë¦¬ ì‹¤í–‰ ì‹œë„

Â  Â  Â  Â  Â  Â  for (int i=1; i<=MAX_QUERY_COUNT; i++) {

Â  Â  Â  Â  Â  Â  Â  Â  String queryId = NAMESPACE + prefix + param.getString("queryId") + (i==1?"":i);

Â  Â  Â  Â  Â  Â  Â  Â  // ë§¤í¼ ì¡´ì¬ ì—¬ë¶€ í™•ì¸

Â  Â  Â  Â  Â  Â  Â  Â  if (commonRepository.getSqlSession().getConfiguration().getMappedStatement(queryId) != null) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  int rows = commonRepository.insert(queryId, param);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  result += i==1?rows:0; // ì²« ë²ˆì§¸ ì¿¼ë¦¬ ê²°ê³¼ë§Œ ë°˜í™˜

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  // í•œ ë²ˆë§Œ ì‹¤í–‰ ì˜µì…˜

Â  Â  Â  Â  Â  Â  Â  Â  if (param.getBoolean("runOnce")) break;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  } catch (Exception e) {

Â  Â  Â  Â  Â  Â  // ì¿¼ë¦¬ ì‹¤í–‰ ì‹¤íŒ¨ ì‹œ ë¬´ì‹œ

Â  Â  Â  Â  }

  

Â  Â  Â  Â  return result;

Â  Â  }

Â  Â  /**

Â  Â  Â * ë‹¤ì¤‘ ì¿¼ë¦¬ update ì²˜ë¦¬

Â  Â  Â * @param prefix: ì¿¼ë¦¬ ì ‘ë‘ì‚¬

Â  Â  Â * @param param: íŒŒë¼ë¯¸í„°

Â  Â  Â * @return ì˜í–¥ë°›ì€ í–‰ ìˆ˜

Â  Â  Â * @throws Exception

Â  Â  Â */

Â  Â  private int update(String prefix, CommonMap param) throws Exception {

Â  Â  Â  Â  int result = 0;

  

Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  for (int i=1; i<=MAX_QUERY_COUNT; i++) {

Â  Â  Â  Â  Â  Â  Â  Â  String queryId = NAMESPACE + prefix + param.getString("queryId") + (i==1?"":i);

Â  Â  Â  Â  Â  Â  Â  Â  if (commonRepository.getSqlSession().getConfiguration().getMappedStatement(queryId) != null) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  int rows = commonRepository.update(queryId, param);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  result += i==1?rows:0;

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  if (param.getBoolean("runOnce")) break;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  } catch (Exception e) {}

  

Â  Â  Â  Â  return result;

Â  Â  }

Â  Â  /**

Â  Â  Â * ë‹¤ì¤‘ ì¿¼ë¦¬ delete ì²˜ë¦¬

Â  Â  Â * @param prefix: ì¿¼ë¦¬ ì ‘ë‘ì‚¬

Â  Â  Â * @param param: íŒŒë¼ë¯¸í„°

Â  Â  Â * @return ì˜í–¥ë°›ì€ í–‰ ìˆ˜

Â  Â  Â * @throws Exception

Â  Â  Â */

Â  Â  private int delete(String prefix, CommonMap param) throws Exception {

Â  Â  Â  Â  int result = 0;

  

Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  for (int i=1; i<=MAX_QUERY_COUNT; i++) {

Â  Â  Â  Â  Â  Â  Â  Â  String queryId = NAMESPACE + prefix + param.getString("queryId") + (i==1?"":i);

Â  Â  Â  Â  Â  Â  Â  Â  if (commonRepository.getSqlSession().getConfiguration().getMappedStatement(queryId) != null) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  int rows = commonRepository.delete(queryId, param);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  result += i==1?rows:0;

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  if (param.getBoolean("runOnce")) break;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  } catch (Exception e) {}

  

Â  Â  Â  Â  return result;

Â  Â  }

Â  Â  /**

Â  Â  Â * ë™ì  ì˜µì…˜ ì„¤ì •

Â  Â  Â * @param queryId: ì¿¼ë¦¬ ID

Â  Â  Â * @param param: íŒŒë¼ë¯¸í„°

Â  Â  Â * @return CommonMap ë¦¬ìŠ¤íŠ¸

Â  Â  Â * @throws Exception

Â  Â  Â */

Â  Â  public List<CommonMap> SetDynamicOption(String queryId, CommonMap param) throws Exception {

Â  Â  Â  Â  List<CommonMap> query_result = new ArrayList<CommonMap>();

Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  String p_QueryId = param.getString("queryId");

Â  Â  Â  Â  Â  Â  query_result = commonRepository.selectList(p_QueryId, param);

Â  Â  Â  Â  } catch (Exception e) {

Â  Â  Â  Â  Â  Â  // ì¿¼ë¦¬ ì‹¤í–‰ ì‹¤íŒ¨ ì‹œ ë¹ˆ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜

Â  Â  Â  Â  }

  

Â  Â  Â  Â  return query_result;

Â  Â  }

}

```

  

#### 4.2 MyBatis ë§¤í¼ êµ¬ì¡°

```xml

<!-- select.xml ì˜ˆì‹œ - W/O ë¦¬ìŠ¤íŠ¸ ê²€ìƒ‰ -->

<select id="select_woAllList" parameterType="commonMap" resultType="commonMap">

Â  Â  SELECT A.WO_NO, A.WO_REV, A.PROJECT_NAME,

Â  Â  Â  Â  Â  Â CONVERT(A.WO_DATE,DATE) WO_DATE,

Â  Â  Â  Â  Â  Â CONVERT(A.DELIVERY_DATE,DATE) DELIVERY_DATE,

Â  Â  Â  Â  Â  Â A.STAMP_U_YORN, A.STAMP_U2_YORN, A.STAMP_PP_YORN, A.STAMP_S_YORN,

Â  Â  Â  Â  Â  Â A.STAMP_SQL_YORN, A.CLIENT_NAME

Â  Â  FROM V_WO_MASTER A

Â  Â  WHERE 1=1

Â  Â  <!-- ë‚ ì§œ ë²”ìœ„ ì¡°ê±´ -->

Â  Â  <if test="startDate neq null and startDate neq ''">

Â  Â  Â  Â  AND DATE_FORMAT(A.WO_DATE, '%Y%m%d') BETWEEN DATE_FORMAT(#{startDate}, '%Y%m%d') AND DATE_FORMAT(#{endDate}, '%Y%m%d')

Â  Â  </if>

Â  Â  <!-- W/O ë²ˆí˜¸ ê²€ìƒ‰ -->

Â  Â  <if test="pWoNo neq null and pWoNo neq ''">

Â  Â  Â  Â  AND A.WO_NO LIKE '%${pWoNo}%'

Â  Â  </if>

Â  Â  <!-- W/O êµ¬ë¶„ ê²€ìƒ‰ -->

Â  Â  <if test="pWoGubn neq null and pWoGubn neq ''">

Â  Â  Â  Â  AND A.WO_GUBN COLLATE utf8mb4_general_ci = #{pWoGubn}

Â  Â  </if>

Â  Â  ORDER BY A.WO_DATE DESC, A.WO_NO DESC

</select>

  

<!-- ì™¸ì£¼ ì—…ì²´ ë¦¬ìŠ¤íŠ¸ -->

<select id="select_outClientList" parameterType="commonMap" resultType="commonMap">

Â  Â  SELECT PARTNER_CODE AS VALUE, PARTNER_NAME AS TEXT,

Â  Â  Â  Â  Â  Â CASE

Â  Â  Â  Â  Â  Â  Â  Â WHEN SUBSTRING(PARTNER_NAME, 1, 1) REGEXP '^[ê°€-í£]+' THEN '1'

Â  Â  Â  Â  Â  Â  Â  Â WHEN SUBSTRING(PARTNER_NAME, 1, 1) REGEXP '^[0-9]+' THEN '4'

Â  Â  Â  Â  Â  Â  Â  Â WHEN SUBSTRING(PARTNER_NAME, 1, 1) REGEXP '^[a-zA-Z]+' THEN '3'

Â  Â  Â  Â  Â  Â  Â  Â ELSE '2'

Â  Â  Â  Â  Â  Â END AS SORT_ORDER

Â  Â  FROM T_PARTNER

Â  Â  WHERE USE_YN = 'Y'

Â  Â  <if test="partnerName neq null and partnerName neq ''">

Â  Â  Â  Â  AND PARTNER_NAME LIKE '%${partnerName}%'

Â  Â  </if>

Â  Â  ORDER BY SORT_ORDER, PARTNER_NAME

</select>

  

<!-- ê³µí†µì½”ë“œ ì¡°íšŒ -->

<select id="select_commCode" parameterType="commonMap" resultType="commonMap">

Â  Â  SELECT CODE_ID AS VALUE, CODE_NAME AS TEXT,

Â  Â  Â  Â  Â  Â CODE_DESC, SORT_ORDER, USE_YN

Â  Â  FROM T_COMMON_CODE

Â  Â  WHERE PARENT_CODE_ID = #{parentCodeId}

Â  Â  AND USE_YN = 'Y'

Â  Â  <if test="codeId neq null and codeId neq ''">

Â  Â  Â  Â  AND CODE_ID = #{codeId}

Â  Â  </if>

Â  Â  ORDER BY SORT_ORDER, CODE_ID

</select>

```

  

#### 4.3 ë™ì  ì¿¼ë¦¬ íŠ¹ì§•

- **ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ê¸°ë°˜**: `kr.co.wnpsoft.core.mapper.` + queryId

- **ë‹¤ì¤‘ ì¿¼ë¦¬ ì§€ì›**: ë™ì¼í•œ íŒ¨í„´ì˜ ì—¬ëŸ¬ ì¿¼ë¦¬ ìë™ ì‹¤í–‰ (ìµœëŒ€ 10ê°œ)

- **íƒ€ì… ì•ˆì „ì„±**: CommonMapì„ í†µí•œ ì¼ê´€ëœ íŒŒë¼ë¯¸í„° ì²˜ë¦¬

- **ë™ì  ì¡°ê±´**: MyBatisì˜ `<if>` íƒœê·¸ë¥¼ í™œìš©í•œ ì¡°ê±´ë¶€ ì¿¼ë¦¬

- **ê·¸ë¦¬ë“œ ë°ì´í„° ì²˜ë¦¬**: nameSpaceë¥¼ í†µí•œ ê·¸ë¦¬ë“œ ì „ìš© ì¿¼ë¦¬ ì‹¤í–‰

- **ìë™ í‚¤ ìƒì„±**: queryKeyë¥¼ í†µí•œ ìë™ í‚¤ ìƒì„± ì§€ì›

- **ì‹¤í–‰ ì œì–´**: runOnce ì˜µì…˜ìœ¼ë¡œ ë‹¨ì¼ ì‹¤í–‰ ì œì–´

  

#### 4.4 ì‹¤ì œ ì‚¬ìš© ì˜ˆì‹œ

  

**JSPì—ì„œì˜ ë™ì  ì¿¼ë¦¬ í˜¸ì¶œ**

```javascript

// ê·¸ë¦¬ë“œ ë°ì´í„° ë¡œë“œ

function loadTableData() {

Â  Â  var frm = $("#frmMain");

Â  Â  // í•„ìˆ˜ íŒŒë¼ë¯¸í„° ì„¤ì •

Â  Â  frm.addParam("result", $("#myGrid")); Â  Â  Â  Â // ê·¸ë¦¬ë“œ íƒœê·¸

Â  Â  frm.addParam("grid", "gridOptions"); Â  Â  Â  Â  // ê·¸ë¦¬ë“œ ì˜µì…˜

Â  Â  frm.addParam("baseData", "_originData"); Â  Â  // ì›ë³¸ ë°ì´í„° ì €ì¥ ë³€ìˆ˜

Â  Â  // ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì„¤ì •

Â  Â  frm.addParam("func", "IQ"); Â  Â  Â  Â  Â  Â  Â  Â  // ì¡°íšŒ ê¸°ëŠ¥

Â  Â  frm.addParam("query_id", "qc.utManage.select_utDetailList");

Â  Â  frm.addParam("dataType", "json"); Â  Â  Â  Â  Â  // JSON ì‘ë‹µ íƒ€ì…

Â  Â  // ê²€ìƒ‰ ì¡°ê±´ ì¶”ê°€

Â  Â  frm.addParam("hNdeNo", $("#khNdeNo").val());

Â  Â  frm.addParam("hNdeType", $("#hNdeType").val());

Â  Â  frm.request();

}

  

// ë°ì´í„° ì €ì¥

function saveData() {

Â  Â  var frm = $("#frmMain");

Â  Â  frm.addParam("func", "IS"); Â  Â  Â  Â  Â  Â  Â  Â  // ì €ì¥ ê¸°ëŠ¥

Â  Â  frm.addParam("queryId", "qc.utManage.insert_utDetail");

Â  Â  frm.addParam("dataType", "json");

Â  Â  // ì €ì¥í•  ë°ì´í„° ì¶”ê°€

Â  Â  frm.addParam("ndeNo", $("#ndeNo").val());

Â  Â  frm.addParam("ndeType", $("#ndeType").val());

Â  Â  frm.addParam("ndeDtlSeq", $("#ndeDtlSeq").val());

Â  Â  frm.request();

}

```

  

**ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œì˜ ë™ì  ì¿¼ë¦¬ ì²˜ë¦¬**

```java

@RestController

public class QcController {

  

Â  Â  @Resource(name = "commonService")

Â  Â  private CommonService commonService;

  

Â  Â  /**

Â  Â  Â * UT ìƒì„¸ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ

Â  Â  Â * @param request: HTTP ìš”ì²­

Â  Â  Â * @return CommonMap ë¦¬ìŠ¤íŠ¸

Â  Â  Â */

Â  Â  @RequestMapping(value = "/qc/utDetailList.do", method = RequestMethod.POST)

Â  Â  public List<CommonMap> utDetailList(HttpServletRequest request) {

Â  Â  Â  Â  List<CommonMap> result = new ArrayList<CommonMap>();

Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  CommonMap param = MapUtils.parseRequest(request);

Â  Â  Â  Â  Â  Â  // ë™ì  ì¿¼ë¦¬ ì‹¤í–‰

Â  Â  Â  Â  Â  Â  result = commonService.select(param);

Â  Â  Â  Â  } catch (Exception e) {

Â  Â  Â  Â  Â  Â  e.printStackTrace();

Â  Â  Â  Â  }

Â  Â  Â  Â  return result;

Â  Â  }

  

Â  Â  /**

Â  Â  Â * UT ìƒì„¸ ì •ë³´ ì €ì¥

Â  Â  Â * @param request: HTTP ìš”ì²­

Â  Â  Â * @return ì²˜ë¦¬ ê²°ê³¼

Â  Â  Â */

Â  Â  @RequestMapping(value = "/qc/utDetailSave.do", method = RequestMethod.POST)

Â  Â  public ResultInfo utDetailSave(HttpServletRequest request) {

Â  Â  Â  Â  String msg = "";

Â  Â  Â  Â  int success = 0;

Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  CommonMap param = MapUtils.parseRequest(request);

Â  Â  Â  Â  Â  Â  // ë‹¨ì¼ ë°ì´í„° ì €ì¥

Â  Â  Â  Â  Â  Â  if (param.getString("func").startsWith("IS")) {

Â  Â  Â  Â  Â  Â  Â  Â  success = commonService.insert(param);

Â  Â  Â  Â  Â  Â  } else if (param.getString("func").startsWith("UP")) {

Â  Â  Â  Â  Â  Â  Â  Â  success = commonService.update(param);

Â  Â  Â  Â  Â  Â  } else if (param.getString("func").startsWith("DL")) {

Â  Â  Â  Â  Â  Â  Â  Â  success = commonService.delete(param);

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  msg = success > 0 ? "ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤." : "ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.";

Â  Â  Â  Â  } catch (Exception e) {

Â  Â  Â  Â  Â  Â  msg = "ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage();

Â  Â  Â  Â  Â  Â  e.printStackTrace();

Â  Â  Â  Â  }

Â  Â  Â  Â  return ResultInfo.of(msg, success, new CommonMap());

Â  Â  }

}

```

  

## ğŸ”§ ê³µì¥ì‹ ì„¤ê³„ì˜ í•µì‹¬ ì›ë¦¬

  

### 1. ì»´í¬ë„ŒíŠ¸ ì¬ì‚¬ìš©ì„±

- **í‘œì¤€í™”ëœ íƒœê·¸**: ì¼ê´€ëœ UI ì»´í¬ë„ŒíŠ¸ ì œê³µ

- **ì„¤ì • ê¸°ë°˜ ë™ì‘**: ì†ì„±ë§Œ ë³€ê²½í•˜ì—¬ ë‹¤ì–‘í•œ ë™ì‘ êµ¬í˜„

- **í™•ì¥ ê°€ëŠ¥í•œ êµ¬ì¡°**: ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€ ì‹œ ê¸°ì¡´ êµ¬ì¡° í™œìš©

  

### 2. ë°ì´í„° ì²˜ë¦¬ í‘œì¤€í™”

- **CommonMap**: ëª¨ë“  ë°ì´í„°ë¥¼ í†µì¼ëœ í˜•íƒœë¡œ ì²˜ë¦¬

- **ìë™ ë³€í™˜**: CamelCase, íƒ€ì… ë³€í™˜ ë“± ìë™ ì²˜ë¦¬

- **ì„¸ì…˜ í†µí•©**: ìš”ì²­ê³¼ ì„¸ì…˜ ì •ë³´ ìë™ ë³‘í•©

  

### 3. ë™ì  ì²˜ë¦¬ ë©”ì»¤ë‹ˆì¦˜

- **ëŸ°íƒ€ì„ ì¿¼ë¦¬**: queryId ê¸°ë°˜ ë™ì  SQL ì‹¤í–‰

- **ê¶Œí•œ í†µí•©**: ì¤‘ì•™í™”ëœ ê¶Œí•œ ê´€ë¦¬

- **ë¼ìš°íŠ¸ ìë™í™”**: URL íŒ¨í„´ ê¸°ë°˜ ìë™ ë·° ë§¤í•‘

  

## ğŸ“Š ì¥ì  ë° íŠ¹ì§•

  

### 1. ê°œë°œ íš¨ìœ¨ì„±

- **ë¹ ë¥¸ ê°œë°œ**: í‘œì¤€í™”ëœ ì»´í¬ë„ŒíŠ¸ë¡œ ì‹ ì†í•œ UI êµ¬ì¶•

- **ì¼ê´€ì„±**: í†µì¼ëœ ì½”ë”© ìŠ¤íƒ€ì¼ê³¼ ë°ì´í„° ì²˜ë¦¬

- **ì¬ì‚¬ìš©ì„±**: ë†’ì€ ì»´í¬ë„ŒíŠ¸ ì¬ì‚¬ìš©ë¥ 

  

### 2. ìœ ì§€ë³´ìˆ˜ì„±

- **ì¤‘ì•™í™”ëœ ê´€ë¦¬**: ê³µí†µ ë¡œì§ì˜ ì¤‘ì•™ ì§‘ì¤‘í™”

- **í‘œì¤€í™”ëœ êµ¬ì¡°**: ì˜ˆì¸¡ ê°€ëŠ¥í•œ ì½”ë“œ êµ¬ì¡°

- **í™•ì¥ì„±**: ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€ ì‹œ ê¸°ì¡´ êµ¬ì¡° í™œìš©

  

### 3. í™•ì¥ì„±

- **ëª¨ë“ˆí™”**: ë…ë¦½ì ì¸ ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

- **ì„¤ì • ê¸°ë°˜**: ì½”ë“œ ë³€ê²½ ì—†ì´ ë™ì‘ ë³€ê²½ ê°€ëŠ¥

- **ë‹¤ì¤‘ ë°ì´í„°ë² ì´ìŠ¤**: MariaDB, SQL Server ë™ì‹œ ì§€ì›

  

## âš ï¸ ì£¼ì˜ì‚¬í•­ ë° ê°œì„ ì 

  

### 1. ë ˆê±°ì‹œ íŠ¹ì„±

- **ì „ìì •ë¶€ í”„ë ˆì„ì›Œí¬ ì˜ì¡´ì„±**: íŠ¹ì • í”„ë ˆì„ì›Œí¬ì— ê°•í•˜ê²Œ ê²°í•©

- **JSP ê¸°ë°˜**: ìµœì‹  í”„ë¡ íŠ¸ì—”ë“œ ê¸°ìˆ ê³¼ì˜ í†µí•© ì–´ë ¤ì›€

- **XML ì„¤ì •**: ëŒ€ëŸ‰ì˜ XML ì„¤ì • íŒŒì¼ ê´€ë¦¬

  

### 2. ê°œì„  ë°©í–¥

- **ëª¨ë˜ í”„ë¡ íŠ¸ì—”ë“œ ë„ì…**: React/Vue.js ë“± SPA í”„ë ˆì„ì›Œí¬ ê³ ë ¤

- **REST API í‘œì¤€í™”**: JSON ê¸°ë°˜ API í†µí•©

- **ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì „í™˜**: ëª¨ë†€ë¦¬ì‹ êµ¬ì¡°ì˜ ë¶„ë¦¬

  

## ğŸ¯ ê²°ë¡  ë° ê¶Œì¥ì‚¬í•­

  

### í”„ë¡œì íŠ¸ì˜ ê°•ì 

  

ì´ í”„ë¡œì íŠ¸ëŠ” ì „ìì •ë¶€ í”„ë ˆì„ì›Œí¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ë§¤ìš° ì˜ ì„¤ê³„ëœ ë ˆê±°ì‹œ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. ê³µì¥ì‹ ì„¤ê³„ë¥¼ í†µí•´ ë†’ì€ ì¬ì‚¬ìš©ì„±ê³¼ ê°œë°œ íš¨ìœ¨ì„±ì„ ë‹¬ì„±í–ˆìœ¼ë©°, íŠ¹íˆ ë‹¤ìŒê³¼ ê°™ì€ ê°•ì ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤:

  

#### 1. **ë†’ì€ ì¬ì‚¬ìš©ì„±**

- **í‘œì¤€í™”ëœ JSP Taglib**: ì¼ê´€ëœ UI ì»´í¬ë„ŒíŠ¸ë¡œ ë¹ ë¥¸ í™”ë©´ ê°œë°œ

- **ë™ì  ë¼ìš°íŒ…**: URL íŒ¨í„´ ê¸°ë°˜ ìë™ ë·° ë§¤í•‘ìœ¼ë¡œ ì½”ë“œ ì¤‘ë³µ ìµœì†Œí™”

- **CommonMap**: í†µì¼ëœ ë°ì´í„° ì²˜ë¦¬ë¡œ ì¼ê´€ì„± ë³´ì¥

- **ë™ì  ì¿¼ë¦¬**: queryId ê¸°ë°˜ ëŸ°íƒ€ì„ ì¿¼ë¦¬ ì‹¤í–‰ìœ¼ë¡œ ìœ ì—°ì„± í™•ë³´

  

#### 2. **ì‹ ì… ê°œë°œì ì¹œí™”ì **

- **í‘œì¤€í™”ëœ íŒ¨í„´**: ì˜ˆì¸¡ ê°€ëŠ¥í•œ ì½”ë“œ êµ¬ì¡°

- **ìƒì„¸í•œ ì£¼ì„**: ëª¨ë“  ë©”ì„œë“œì™€ íŒŒë¼ë¯¸í„°ì— ëŒ€í•œ ëª…í™•í•œ ì„¤ëª…

- **ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸**: ê¸°ì¡´ ì»´í¬ë„ŒíŠ¸ í™œìš©ìœ¼ë¡œ ë¹ ë¥¸ ê°œë°œ

- **ì¤‘ì•™í™”ëœ ê´€ë¦¬**: ê³µí†µ ë¡œì§ì˜ íš¨ìœ¨ì  ê´€ë¦¬

  

#### 3. **í™•ì¥ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±**

- **ëª¨ë“ˆí™”ëœ êµ¬ì¡°**: ë…ë¦½ì ì¸ ì»´í¬ë„ŒíŠ¸ ì„¤ê³„

- **ì„¤ì • ê¸°ë°˜ ë™ì‘**: ì½”ë“œ ë³€ê²½ ì—†ì´ ë™ì‘ ë³€ê²½ ê°€ëŠ¥

- **ë‹¤ì¤‘ ë°ì´í„°ë² ì´ìŠ¤ ì§€ì›**: MariaDB, SQL Server ë™ì‹œ ì§€ì›

- **ê¶Œí•œ í†µí•© ê´€ë¦¬**: ì¤‘ì•™í™”ëœ ê¶Œí•œ ê²€ì¦ ì‹œìŠ¤í…œ

  

### ê°œì„  ê¶Œì¥ì‚¬í•­

  

#### 1. **ì ì§„ì  í˜„ëŒ€í™”**

- **í”„ë¡ íŠ¸ì—”ë“œ ì—…ê·¸ë ˆì´ë“œ**: React/Vue.js ë“± SPA í”„ë ˆì„ì›Œí¬ ë„ì… ê³ ë ¤

- **REST API í‘œì¤€í™”**: JSON ê¸°ë°˜ API í†µí•©

- **ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì „í™˜**: ëª¨ë†€ë¦¬ì‹ êµ¬ì¡°ì˜ ì ì§„ì  ë¶„ë¦¬

  

#### 2. **ê¸°ìˆ  ìŠ¤íƒ í˜„ëŒ€í™”**

- **Spring Boot ë§ˆì´ê·¸ë ˆì´ì…˜**: ì „ìì •ë¶€ í”„ë ˆì„ì›Œí¬ì—ì„œ Spring Bootë¡œ ì „í™˜

- **JPA ë„ì…**: MyBatisì™€ JPA í•˜ì´ë¸Œë¦¬ë“œ ì‚¬ìš©

- **Docker ì»¨í…Œì´ë„ˆí™”**: ë°°í¬ ë° ìš´ì˜ í™˜ê²½ í‘œì¤€í™”

  

#### 3. **ê°œë°œ í”„ë¡œì„¸ìŠ¤ ê°œì„ **

- **CI/CD íŒŒì´í”„ë¼ì¸**: ìë™í™”ëœ ë¹Œë“œ ë° ë°°í¬

- **ì½”ë“œ í’ˆì§ˆ ê´€ë¦¬**: SonarQube ë“± ì •ì  ë¶„ì„ ë„êµ¬ ë„ì…

- **API ë¬¸ì„œí™”**: Swagger/OpenAPIë¥¼ í†µí•œ API ë¬¸ì„œ ìë™í™”

  

### ì‹ ì… ê°œë°œìë¥¼ ìœ„í•œ í•™ìŠµ ê°€ì´ë“œ

  

#### 1. **ê¸°ë³¸ ê°œë… ì´í•´**

- **ì „ìì •ë¶€ í”„ë ˆì„ì›Œí¬**: ê³µê³µê¸°ê´€ í‘œì¤€ í”„ë ˆì„ì›Œí¬ ì´í•´

- **Spring MVC**: ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ì•„í‚¤í…ì²˜ íŒ¨í„´

- **MyBatis**: SQL ë§¤í¼ í”„ë ˆì„ì›Œí¬ í™œìš©ë²•

- **JSP/JSTL**: ì„œë²„ì‚¬ì´ë“œ í…œí”Œë¦¿ ì—”ì§„

  

#### 2. **í”„ë¡œì íŠ¸ íŠ¹í™” í•™ìŠµ**

- **CommonMap í™œìš©ë²•**: í†µí•© ë°ì´í„° ì²˜ë¦¬ ë°©ì‹

- **ë™ì  ë¼ìš°íŒ…**: URL íŒ¨í„´ ê¸°ë°˜ ë·° ë§¤í•‘

- **JSP Taglib**: ì»¤ìŠ¤í…€ íƒœê·¸ ê°œë°œ ë° ì‚¬ìš©

- **ë™ì  ì¿¼ë¦¬**: ëŸ°íƒ€ì„ ì¿¼ë¦¬ ì‹¤í–‰ ë©”ì»¤ë‹ˆì¦˜

  

#### 3. **ì‹¤ë¬´ ì ìš© ë°©ë²•**

- **ê¸°ì¡´ ì»´í¬ë„ŒíŠ¸ í™œìš©**: ì¬ì‚¬ìš© ê°€ëŠ¥í•œ íƒœê·¸ ë° ìœ í‹¸ë¦¬í‹° ì‚¬ìš©

- **í‘œì¤€ íŒ¨í„´ ì¤€ìˆ˜**: í”„ë¡œì íŠ¸ì˜ ì½”ë”© ì»¨ë²¤ì…˜ ë”°ë¥´ê¸°

- **ì ì§„ì  ê°œì„ **: ë ˆê±°ì‹œ ì½”ë“œì˜ ì ì§„ì  í˜„ëŒ€í™”

- **ë¬¸ì„œí™”**: ì½”ë“œ ë³€ê²½ ì‹œ ìƒì„¸í•œ ì£¼ì„ ë° ë¬¸ì„œ ì‘ì„±

  

### ìµœì¢… í‰ê°€

  

ì´ í”„ë¡œì íŠ¸ëŠ” **ê³µì¥ì‹ ì„¤ê³„**ì˜ ëª¨ë²” ì‚¬ë¡€ì…ë‹ˆë‹¤. ë†’ì€ ì¬ì‚¬ìš©ì„±ê³¼ ê°œë°œ íš¨ìœ¨ì„±ì„ í†µí•´ ì‹ ì… ê°œë°œìë„ ë¹ ë¥´ê²Œ ì ì‘í•  ìˆ˜ ìˆë„ë¡ ì˜ êµ¬ì¡°í™”ë˜ì–´ ìˆìœ¼ë©°, íŠ¹íˆ JSP Taglib, ë™ì  ë¼ìš°íŒ…, CommonMap, ë™ì  ì¿¼ë¦¬ ì‹œìŠ¤í…œì€ í˜„ëŒ€ì ì¸ ê°œë°œ íŒ¨í„´ì˜ ì„ êµ¬ìì  ì—­í• ì„ í•˜ê³  ìˆìŠµë‹ˆë‹¤.

  

ë‹¤ë§Œ, ìµœì‹  ì›¹ ê°œë°œ íŠ¸ë Œë“œì™€ì˜ í†µí•©ì„ ìœ„í•´ì„œëŠ” ì ì§„ì ì¸ í˜„ëŒ€í™”ê°€ í•„ìš”í•˜ë©°, íŠ¹íˆ í”„ë¡ íŠ¸ì—”ë“œ ê¸°ìˆ  ìŠ¤íƒì˜ ì—…ê·¸ë ˆì´ë“œê°€ ìš°ì„ ì ìœ¼ë¡œ ê³ ë ¤ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë ˆê±°ì‹œ ì‹œìŠ¤í…œì˜ ì¥ì ì„ ìœ ì§€í•˜ë©´ì„œë„ í˜„ëŒ€ì ì¸ ê°œë°œ í™˜ê²½ì„ êµ¬ì¶•í•  ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.