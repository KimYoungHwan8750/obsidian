# 전자정부 프레임워크 기반 레거시 프로젝트 심화 분석 보고서

  

## 📋 개요

  

본 보고서는 전자정부 프레임워크 3.8.0 기반의 레거시 프로젝트에 대한 심화 분석 결과를 담고 있습니다. 이 프로젝트는 공장식 설계를 통해 재사용 가능한 컴포넌트들을 체계적으로 구축하여 빠른 개발이 가능하도록 설계되었으며, 특히 신입 개발자가 빠르게 적응할 수 있도록 표준화된 패턴과 상세한 사용법을 제공합니다.

  

## 🏗️ 프로젝트 구조 분석

  

### 1. 기술 스택

- **프레임워크**: 전자정부 프레임워크 3.8.0

- **Spring**: 4.3.16.RELEASE

- **데이터베이스**: MariaDB, SQL Server 지원

- **ORM**: MyBatis (전자정부 프레임워크 데이터 접근 계층)

- **빌드 도구**: Maven

- **Java**: 1.8

- **프론트엔드**: JSP, Bootstrap, jQuery

  

### 2. 핵심 아키텍처 특징

- **공장식 설계**: 재사용 가능한 컴포넌트 기반 개발

- **동적 라우팅**: PathVariable을 활용한 유연한 URL 매핑

- **통합 데이터 처리**: CommonMap을 통한 일관된 데이터 처리

- **동적 쿼리**: 런타임 queryId 기반 DB 처리

  

## 🎯 핵심 컴포넌트 분석

  

### 1. JSP Taglib 시스템

  

#### 1.1 태그 라이브러리 구성

프로젝트는 5개의 주요 태그 라이브러리로 구성되어 있습니다:

  

- **card.tld**: 카드형 UI 컴포넌트 (제목, 내용, 버튼 관리)

- **form.tld**: 폼 관련 컴포넌트 (검색 조건용, 마진 0으로 생성)

- **label.tld**: 라벨이 있는 폼 컴포넌트 (일반 폼 입력용)

- **section.tld**: 섹션 관리 컴포넌트 (모달 타입별 섹션)

- **func.tld**: 유틸리티 함수 (JSON 변환, 포맷터 등)

  

#### 1.2 주요 태그 상세 분석

  

**FormGrid 태그 - AG-Grid 기반 데이터 그리드**

```java

/**

 * AG-Grid 기반 데이터 그리드 생성 태그

 * @param id: 그리드 ID (필수)

 * @param height: 그리드 높이 (px, % 지원)

 * @param style: 추가 스타일

 * @param addClassName: 추가 CSS 클래스

 */

public class FormGrid extends SimpleTagSupport {

    private String id = "";

    private String height = "";

    private String style = "";

    private String addClassName = "";

    @Override

    public void doTag() throws JspException, IOException {

        JspContext context = getJspContext();

        JspWriter out = context.getOut();

        String result = "";

  

        // 높이 설정 검증 및 AG-Grid 테마 적용

        if (StringUtils.isEmpty(height.replace("%", "").replace("px", ""))) {

            result += "        <div id=\"" + id + "\" class=\"ag-theme-balham " + addClassName + "\" style=\"" + style + "\"></div> \n";

        } else {

            result += "        <div id=\"" + id + "\" class=\"ag-theme-balham " + addClassName + "\" style=\"" + style + "\" data-height=\"" + height + "\"></div> \n";

        }

        out.print(result);

    }

}

```

  

**FormInput 태그 - 다양한 입력 타입 지원**

```java

/**

 * 다양한 입력 타입을 지원하는 폼 태그

 * @param type: 입력 타입 (text, hidden, checkbox, radio, autocomplete)

 * @param id: 필드 ID (필수)

 * @param caption: 라벨 텍스트

 * @param size: Bootstrap 그리드 크기 (1-12)

 * @param queryId: 동적 옵션 생성용 쿼리 ID

 * @param all: "전체" 옵션 사용 여부 (checkbox/radio)

 * @param code: 자동완성 코드 필드

 */

public class FormInput extends SimpleTagSupport {

    private String type = "text";

    private String id = "";

    private String caption = "";

    private String size = "search_list";

    private String value = "";

    private String className = "default";

    private String addClassName = "";

    private String addAttr = "";

    private int colNum = 0;

    private String queryId = "";

    private boolean all = false;

    private String allLabel = "";

    private String code = "";

    @Override

    public void doTag() throws JspException, IOException {

        ApplicationContext context = ApplicationContextProvider.getApplicationContext();

        PageContext pageContext = (PageContext) getJspContext();

        JspWriter out = pageContext.getOut();

        String result = "";

  

        // 동적 옵션 생성 (queryId 기반)

        if ("checkbox".equals(type) || "radio".equals(type)) {

            List<CommonMap> list = new ArrayList<CommonMap>();

            HttpSession session = pageContext.getSession();

            try {

                CommonService service = context.getBean(CommonService.class);

                CommonMap param = MapUtils.parseSession(session);

                // 공통코드 조회 (#으로 시작하는 경우)

                if (queryId.startsWith("#")) {

                    param.put("queryId", "common.select_commCode");

                    param.put("parentCodeId", queryId.substring(1).toUpperCase());

                    list = service.select(param);

                } else {

                    // 일반 쿼리 조회

                    param.put("queryId", queryId);

                    list = service.select(param);

                }

            } catch (Exception e) { }

            // 옵션 HTML 생성

            for(int i=0; i<list.size(); i++) {

                CommonMap item = list.get(i);

                String addData = "";

                // 추가 데이터 속성 설정

                if (item.has("dataVal1")) addData += " data-val1='" + item.getString("dataVal1") + "'";

                if (item.has("dataVal2")) addData += " data-val2='" + item.getString("dataVal2") + "'";

                if (all && "checkbox".equals(type)) addData += "data-checkbox=\"" + id + "_item\"";

                result += "                        <label class=\"search-cond\"" + style + "><input type=\"" + type + "\" id=\"" + (id + i) + "\" name=\"" + id + "\" value=\"" + item.getString("value") + "\" " + addData + (value.equals(item.getString("value")) ? " checked='checked'" : "") +" />&nbsp;" + item.getString("text") + "</label> \n";

            }

        }

        out.print(result);

    }

}

```

  

**LabelInput 태그 - 라벨이 있는 폼 입력**

```java

/**

 * 라벨이 있는 폼 입력 태그

 * @param type: 입력 타입 (text, autocomplete)

 * @param id: 필드 ID (필수)

 * @param caption: 라벨 텍스트 (필수)

 * @param size: Bootstrap 그리드 크기 (기본: 4)

 * @param icon: 아이콘 클래스 (기본: fas fa-pencil-alt)

 * @param state: 상태 (readonly, disabled)

 * @param stateIcon: 상태별 아이콘

 * @param btnId: 버튼 ID (버튼이 있는 경우)

 * @param btnCaption: 버튼 텍스트

 * @param btnClass: 버튼 스타일 클래스

 */

public class LabelInput extends SimpleTagSupport {

    private String type = "text";

    private String id = "";

    private String caption = "";

    private String size = "4";

    private String value = "";

    private String className = "default";

    private String addClassName = "";

    private String addAttr = "";

    private String icon = "fas fa-pencil-alt";

    private String state = "";

    private String stateIcon = "fas fa-eye";

    private String btnId = "";

    private String btnClass = "";

    private String btnCaption = "";

    private String code = "";

    private String queryId = "";

    @Override

    public void doTag() throws JspException, IOException {

        JspContext context = getJspContext();

        JspWriter out = context.getOut();

        String result = "";

        // 상태별 처리

        if ("readonly".equals(state)) {

            icon = StringUtils.isEmpty(stateIcon) ? "" : stateIcon;

            addAttr += " readonly='readonly' ";

        } else if ("disabled".equals(state)) {

            icon = StringUtils.isEmpty(stateIcon) ? "" : stateIcon;

            addAttr += " disabled='disabled' ";

        }

        // 클래스 설정

        if (StringUtils.isEmpty(className) || "default".equals(className)) className = "";

        else className = "has-" + className;

        result += "            <div class=\"form-group no-margin no-padding width_half " + className + "\"> \n";

        result += "                <label class=\"control-label text-right\">" + caption + "</label> \n";

        result += "                <div class=\"inputGroupContainer label-attached\"> \n";

        result += "                    <div class=\"input-group\"> \n";

        // 자동완성 타입 처리

        if ("autocomplete".equals(type)) {

            result += "                        <input type=\"text\" name=\"" + id + "\" id=\"" + id + "\" value=\"" + value + "\" autocomplete=\"off\" class=\"form-control basicAutoComplete " + addClassName + " \" " + addAttr + " data-code=\"" + code + "\" data-query-id=\"" + queryId + "\" > \n";

            result += "                        <input type=\"hidden\" name=\"" + code + "\" id=\"" + code + "\"  > \n";

        } else {

            result += "                        <input name=\"" + id + "\" id=\"" + id + "\" class=\"form-control " + addClassName + "\" type=\"text\" value=\"" + value + "\" " + addAttr + " /> \n";

        }

        // 버튼 추가

        if(!StringUtils.isEmpty(btnId)) {

            result += "                    <span class=\"input-group-btn\"> \n";

            result += "                        <button id=\"" + btnId + "\" type=\"button\" name=\"" + btnId + "\" class=\"btn btn-sm btn-" + btnClass + "\">" + btnCaption + "</button> \n";

            result += "                    </span> \n";

        }

        result += "                    </div> \n";

        result += "                </div> \n";

        result += "            </div> \n";

        out.print(result);

    }

}

```

  

#### 1.3 실제 사용 예시

  

**JSP에서의 태그 사용법**

```jsp

<%@ taglib prefix="form" uri="http://wnpsoft.co.kr/jsp/jstl/form" %>

<%@ taglib prefix="label" uri="http://wnpsoft.co.kr/jsp/jstl/label" %>

<%@ taglib prefix="card" uri="http://wnpsoft.co.kr/jsp/jstl/card" %>

<%@ taglib prefix="func" uri="http://wnpsoft.co.kr/jsp/jstl/func" %>

  

<!-- 카드 컴포넌트 사용 -->

<card:open title="사용자 정보" contents="사용자의 기본 정보를 입력하세요">

    <!-- 카드 내용 -->

</card:open>

  

<!-- 폼 그리드 사용 -->

<form:grid id="userGrid" height="400px" style="width:100%;" />

  

<!-- 검색 조건 폼 -->

<form:input id="userName" caption="사용자명" size="3" value="${userName}" />

<form:select id="userRole" caption="역할" queryId="common.select_userRole" all="true" />

  

<!-- 일반 폼 입력 -->

<label:input id="userEmail" caption="이메일" size="6" icon="fas fa-envelope" />

<label:input id="userPhone" caption="전화번호" size="6" icon="fas fa-phone" state="readonly" />

  

<!-- 자동완성 입력 -->

<label:input id="companyName" caption="회사명" type="autocomplete" code="companyCode" queryId="common.select_companyList" />

  

<!-- 함수 사용 -->

<script>

    var roleData = ${func:codeToJSON(pageContext, 'USER_ROLE')};

    var langData = ${func:langToJSON(pageContext)};

</script>

```

  

#### 1.4 재사용성 특징

- **일관된 스타일링**: Bootstrap 기반 반응형 디자인

- **동적 데이터 바인딩**: queryId를 통한 실시간 데이터 로딩

- **상태 관리**: readonly, disabled 등 다양한 상태 지원

- **확장성**: addClassName, addAttr 등을 통한 커스터마이징

- **자동 변환**: 공통코드(#) 접두사로 자동 공통코드 조회

- **유연한 레이아웃**: size 속성으로 Bootstrap 그리드 활용

  

### 2. 동적 라우트 처리 시스템

  

#### 2.1 라우트 매핑 구조

```java

/**

 * 동적 라우트 처리를 위한 SiteController

 * URL 패턴에 따라 자동으로 JSP 뷰를 매핑하는 시스템

 */

@Controller

public class SiteController {

  

    @Resource(name = "commonService")

    private final CommonService commonService;

    /**

     * 2단계 동적 라우트 처리: /{route1}/{route2}.do

     * @param route1: 첫 번째 경로 (모듈명)

     * @param route2: 두 번째 경로 (기능명)

     * @param session: HTTP 세션

     * @param model: Spring MVC 모델

     * @return JSP 뷰 경로

     */

    @RequestMapping(value = "/{route1}/{route2}.do", method = RequestMethod.GET)

    public String route(@PathVariable("route1") String route1,

                        @PathVariable("route2") String route2,

                        HttpSession session, Model model) {

        String url = String.format("/%s/%s.do", route1, route2);

        CommonMap param = MapUtils.parseSession(session);

        // 권한 검증

        List<CommonMap> authList = AuthUtils.getList(param, url);

        if (authList.size() > 0) {

            session.setAttribute("user_menu_auth", authList);

        } else {

            String menuUrl = "";

            // 대체 URL 권한 검증

            if (!StringUtils.isEmpty(menuUrl)) {

                authList = AuthUtils.getList(param, menuUrl);

                if (authList.size() > 0) {

                    session.setAttribute("user_menu_auth", authList);

                } else {

                    return "redirect:/";

                }

            } else {

                return "redirect:/";

            }

        }

        // 메뉴 정보 설정

        menu(session, model, url);

        model.addAttribute("user_id", session.getAttribute("user_id"));

        model.addAttribute("user_name", session.getAttribute("user_name"));

        return String.format("/proj/%s/%s", route1, route2);

    }

    /**

     * 태블릿 전용 라우트: /tablet/{route1}.do

     * @param route1: 태블릿 기능명

     * @param session: HTTP 세션

     * @param model: Spring MVC 모델

     * @return 태블릿 JSP 뷰 경로

     */

    @RequestMapping(value = "/tablet/{route1}.do", method = RequestMethod.GET)

    public String routeTablet(@PathVariable("route1") String route1,

                              HttpSession session, Model model) {

        String url = String.format("/tablet/%s.do", route1);

        CommonMap param = MapUtils.parseSession(session);

        // 태블릿용 날짜 설정 (최근 7일)

        Date today = new Date();

        SimpleDateFormat date = new SimpleDateFormat("yyyy-MM-dd");

        String endDate = date.format(today);

        Calendar mon = Calendar.getInstance();

        mon.add(Calendar.DATE, -7);

        String startDate = new java.text.SimpleDateFormat("yyyy-MM-dd").format(mon.getTime());

        menu(session, model, url);

        model.addAttribute("user_id", session.getAttribute("user_id"));

        model.addAttribute("user_name", session.getAttribute("user_name"));

        model.addAttribute("startDate", startDate);

        model.addAttribute("endDate", endDate);

        return String.format("/tablet/%s", route1);

    }

    /**

     * 팝업 라우트: /pop/{route1}/{route2}.do

     * @param route1: 모듈명

     * @param route2: 팝업명

     * @param session: HTTP 세션

     * @param model: Spring MVC 모델

     * @return 팝업 JSP 뷰 경로

     */

    @RequestMapping(value = "/pop/{route1}/{route2}.do", method = RequestMethod.GET)

    public String popRoute(@PathVariable("route1") String route1,

                          @PathVariable("route2") String route2,

                          HttpSession session, Model model) {

        model.addAttribute("menu_group", route1);

        return String.format("/proj/pop/%s/%s", route1, route2);

    }

    /**

     * 관리자 라우트: /manage/{route1}.do

     * @param route1: 관리 기능명

     * @param session: HTTP 세션

     * @param model: Spring MVC 모델

     * @return 관리자 JSP 뷰 경로

     */

    @RequestMapping(value = "/manage/{route1}.do", method = RequestMethod.GET)

    public String manage(@PathVariable("route1") String route1,

                        HttpSession session, Model model) {

        String url = String.format("/manage/%s.do", route1);

        CommonMap param = MapUtils.parseSession(session);

        List<CommonMap> authList = AuthUtils.getList(param, url);

        if (authList.size() > 0) {

            session.setAttribute("user_menu_auth", authList);

        } else {

            return "redirect:/";

        }

        menu(session, model, "/manage/"+route1+".do");

        model.addAttribute("user_id", session.getAttribute("user_id"));

        model.addAttribute("user_name", session.getAttribute("user_name"));

        // 관리 기능별 뷰 분기

        if(route1.contains("code")) {

            return "/proj/manage/codeManage";

        } else if(route1.contains("role")) {

            return "/proj/manage/roleManage";

        } else {

            return "/core/index";

        }

    }

    /**

     * 메뉴 정보 설정 메서드

     * @param session: HTTP 세션

     * @param model: Spring MVC 모델

     * @param url: 현재 URL

     */

    private void menu(HttpSession session, Model model, String url) {

        CommonMap param = MapUtils.parseSession(session);

        List<CommonMap> menuList = new ArrayList<CommonMap>();

        List<CommonMap> topMenuList = new ArrayList<CommonMap>();

        try {

            param.put("queryId", "common.select_menu");

            menuList = commonService.select(param);

            boolean isFound = false;

  

            for (int i=0; i<menuList.size(); i++) {

                CommonMap menu = menuList.get(i);

                if (menu.getInt("menuDepth") == 1) {

                    if (!isFound) {

                        model.addAttribute("topMenuId", menu.getString("menuId"));

                    }

                    topMenuList.add(menu);

                }

                if (isFound) continue;

                if (url.equals(menu.getString("menuUrl")) && menu.has("menuUrl")) {

                    model.addAttribute("menuName", menu.getString("menuName"));

                    model.addAttribute("menuStr", menu.getString("menuNameStr"));

                    model.addAttribute("menuId", menu.getString("menuId"));

                    model.addAttribute("parentMenuId", menu.getString("parentMenuId"));

                    model.addAttribute("codeId", menu.getString("codeId"));

                    isFound = true;

                }

            }

            if (!isFound) {

                model.addAttribute("menuName", "");

                model.addAttribute("topMenuId", 0);

            }

            model.addAttribute("menuList", menuList);

            model.addAttribute("topMenuList", topMenuList);

        } catch (Exception e) {

            // 메뉴 조회 실패 시 기본값 설정

        }

    }

}

```

  

#### 2.2 라우트 처리 특징

- **패턴 기반 매핑**: URL 패턴에 따른 자동 뷰 매핑

- **권한 통합 관리**: AuthUtils를 통한 중앙화된 권한 검증

- **메뉴 자동 처리**: menu() 메서드를 통한 일관된 메뉴 처리

- **다중 디바이스 지원**: 태블릿, 웹 등 다양한 디바이스 대응

- **팝업 지원**: 별도의 팝업 라우트 처리

- **관리자 기능**: 관리자 전용 라우트 및 권한 처리

  

### 3. CommonMap 데이터 처리 시스템

  

#### 3.1 CommonMap 클래스 구조

```java

/**

 * 통합 데이터 처리를 위한 CommonMap 클래스

 * ListOrderedMap을 상속하여 순서가 보장되는 Map 기능 제공

 * 자동 CamelCase 변환 및 타입 안전한 데이터 접근 지원

 */

public final class CommonMap extends ListOrderedMap {

    private static final long serialVersionUID = -5612938228459808005L;

    private static final String ignoreName = "state_col,"; // CamelCase 변환 제외 필드

  

    public CommonMap() {}

    public CommonMap(String key, Object value) {

        this.put(key, value);

    }

    /**

     * 문자열 데이터 안전 접근 (기본값 포함)

     * @param name: 필드명

     * @param def: 기본값

     * @return 문자열 값

     */

    public String getString(String name, String def) {

        Object obj = get(name);

        if (obj == null) {

            return def;

        } else {

            if(obj instanceof String[]) {

                return ((String[]) obj)[0]; // 배열의 첫 번째 값 반환

            } else {

                return obj.toString();

            }

        }

    }

    /**

     * 문자열 데이터 안전 접근 (기본값: 빈 문자열)

     * @param name: 필드명

     * @return 문자열 값

     */

    public String getString(String name) {

        return getString(name, "");

    }

    /**

     * 필드 존재 여부 확인

     * @param name: 필드명

     * @return 존재 여부

     */

    public boolean has(String name) {

        return get(name) != null;

    }

  

    /**

     * 필드가 비어있는지 확인

     * @param name: 필드명

     * @return 비어있음 여부

     */

    public boolean isEmpty(String name) {

        return StringUtils.isEmpty(getString(name, ""));

    }

    /**

     * 중첩 맵 처리 (CommonMap 반환)

     * @param name: 필드명

     * @return CommonMap 객체

     */

    public CommonMap getMap(String name) {

        Object obj = get(name);

  

        try {

            if (obj == null) {

                return new CommonMap();

            } else if (obj instanceof LinkedHashMap) {

                return CommonMap.parse((LinkedHashMap<String, Object>) obj);

            } else {

                return (CommonMap) obj;

            }

        } catch (Exception e) {

            return new CommonMap();

        }

    }

    /**

     * 인덱스 기반 맵 접근

     * @param idx: 인덱스

     * @return CommonMap 객체

     */

    public CommonMap getMap(int idx) {

        Object obj = getValue(idx);

  

        try {

            if (obj == null) {

                return new CommonMap();

            } else if (obj instanceof LinkedHashMap) {

                return CommonMap.parse((LinkedHashMap<String, Object>) obj);

            } else {

                return (CommonMap) obj;

            }

        } catch (Exception e) {

            return new CommonMap();

        }

    }

    /**

     * 리스트 데이터 접근

     * @param name: 필드명

     * @return CommonMap 리스트

     */

    public List<CommonMap> getList(String name) {

        Object obj = get(name);

  

        try {

            if (obj == null) {

                return new ArrayList<CommonMap>();

            } else {

                if (((List) obj).size() > 0 && ((List) obj).get(0) instanceof LinkedHashMap) {

                    List<CommonMap> result = new ArrayList<CommonMap>();

                    List<LinkedHashMap<String, Object>> temp = (List<LinkedHashMap<String, Object>>) obj;

                    for(int i=0; i<temp.size(); i++) {

                        result.add(CommonMap.parse(temp.get(i)));

                    }

                    return result;

                } else {

                    return (List<CommonMap>) obj;

                }

            }

        } catch (Exception e) {

            e.printStackTrace();

            return new ArrayList<CommonMap>();

        }

    }

    /**

     * 불린 데이터 접근

     * @param name: 필드명

     * @return 불린 값

     */

    public boolean getBoolean(String name) {

        Object obj = get(name);

  

        try {

            if (obj instanceof Boolean) {

                return (boolean) obj;

            } else if (obj instanceof String) {

                return Boolean.parseBoolean(obj.toString());

            } else {

                return false;

            }

        } catch (Exception e) {

            return false;

        }

    }

    /**

     * 정수 데이터 접근 (기본값 포함)

     * @param name: 필드명

     * @param def: 기본값

     * @return 정수 값

     */

    public int getInt(String name, int def) {

        Object obj = get(name);

        try {

            if (obj instanceof Integer) {

                return (int) obj;

            } else if (obj instanceof String) {

                return Integer.parseInt(obj.toString());

            } else if (obj instanceof BigDecimal) {

                return ((BigDecimal) obj).intValue();

            } else {

                return def;

            }

        } catch (Exception e) {

            return def;

        }

    }

    /**

     * 정수 데이터 접근 (기본값: 0)

     * @param name: 필드명

     * @return 정수 값

     */

    public int getInt(String name) {

        return getInt(name, 0);

    }

    /**

     * 실수 데이터 접근 (기본값 포함)

     * @param name: 필드명

     * @param def: 기본값

     * @return 실수 값

     */

    public double getDouble(String name, double def) {

        Object obj = get(name);

        try {

            if (obj instanceof Integer) {

                return (double) obj;

            } else if (obj instanceof String) {

                return Double.parseDouble(obj.toString());

            } else if (obj instanceof BigDecimal) {

                return ((BigDecimal) obj).doubleValue();

            } else {

                return def;

            }

        } catch (Exception e) {

            return def;

        }

    }

    /**

     * 실수 데이터 접근 (기본값: 0.0)

     * @param name: 필드명

     * @return 실수 값

     */

    public double getDouble(String name) {

        return getDouble(name, 0);

    }

    /**

     * 자동 CamelCase 변환을 통한 데이터 저장

     * @param key: 키

     * @param value: 값

     * @return 저장된 값

     */

    @Override

    public Object put(Object key, Object value) {

        if (key instanceof String) {

            String k = ((String) key).toLowerCase();

            // 특정 필드는 CamelCase 변환 제외

            if (ignoreName.indexOf(k + ",") > -1) {

                return super.put(k, value);

            } else {

                return super.put(CamelUtil.convert2CamelCase((String) key), value);

            }

        } else {

            return super.put(key, value);

        }

    }

  

    /**

     * LinkedHashMap을 CommonMap으로 변환

     * @param map: 변환할 맵

     * @return CommonMap 객체

     */

    public static CommonMap parse(LinkedHashMap<String, Object> map) {

        CommonMap result = new CommonMap();

        try {

            Iterator<String> keyData = map.keySet().iterator();

            while (keyData.hasNext()) {

                String key = keyData.next();

                result.put(key, map.get(key));

            }

        } catch (Exception e) {

            return new CommonMap();

        }

        return result;

    }

    /**

     * JSON 문자열을 CommonMap으로 변환

     * @param json: JSON 문자열

     * @return CommonMap 객체

     */

    public static CommonMap parseJSON(String json) {

        CommonMap result = new CommonMap();

        try {

            ObjectMapper mapper = new ObjectMapper();

            result = mapper.readValue(json, CommonMap.class);

        } catch (Exception e) {

            return new CommonMap();

        }

        return result;

    }

}

```

  

#### 3.2 MapUtils 유틸리티

```java

/**

 * HTTP 요청 및 세션 데이터를 CommonMap으로 변환하는 유틸리티

 * 자동 CamelCase 변환 및 배열 처리 지원

 */

public final class MapUtils {

  

    /**

     * HTTP 요청 파라미터를 CommonMap으로 변환

     * @param request: HTTP 요청 객체

     * @return CommonMap 객체

     */

    public static CommonMap parseRequest(HttpServletRequest request) {

        CommonMap result = new CommonMap();

        String func = request.getParameter("func") == null ? "" : request.getParameter("func");

  

        Enumeration<String> e = request.getParameterNames();

        List<CommonMap> list = new ArrayList<CommonMap>();

  

        // 특수 파라미터 목록 (리스트 복사에서 제외)

        String _name = "_token,func,queryId,queryOrder,queryKey,keyCol,result,grid,baseData,dataType,objId,reqAction,";

        String[] checkbox = request.getParameterValues("checkbox");

  

        // 요청 파라미터 파싱

        while (e.hasMoreElements()) {

            String name = (String) e.nextElement();

            String[] values = request.getParameterValues(name);

  

            if (values != null) {

                // 단일 값 처리

                if (values.length == 1 && !name.startsWith("grd_") && !name.endsWith("[]")) {

                    result.put(name, values[0]);

                } else {

                    // 배열 값 처리

                    if ((func.startsWith("IQ") || func.startsWith("EX") || func.startsWith("PR")) && checkbox != null) {

                        // 체크박스 기반 선택 처리

                        ArrayList<String> alist = new ArrayList<String>();

  

                        for (int i=0; i < checkbox.length; i++) {

                            int chkNum = Integer.parseInt(checkbox[i]);

                            if (!name.equals("checkbox")) {

                                if(values[chkNum] != null && !values[chkNum].equals(""))

                                    alist.add(values[chkNum]);

                            }

                        }

  

                        result.put(name, alist);

                    } else {

                        // 일반 배열 처리

                        if(values.length > 0 && !name.startsWith("grd_")) {

                            ArrayList<String> alist = new ArrayList<String>();

  

                            for (int i=0; i < values.length; i++) {

                                if(values[i] != null && !values[i].equals(""))

                                    alist.add(values[i]);

                            }

  

                            result.put(reverse2CamelCase(name).replace("[]", ""), alist);

                        } else {

                            // 그리드 데이터 처리

                            for (int i=0;i<values.length;i++){

                                if (list.size() <= i || list.get(i) == null){

                                    CommonMap t_map = new CommonMap("index", i);

                                    list.add(t_map);

                                }

  

                                list.get(i).put(reverse2CamelCase(name).replace("[]", ""), values[i]);

                            }

                        }

                    }

                }

            }

        }

  

        // 세션 정보 자동 추가

        HttpSession session = request.getSession();

        Enumeration<String> attrNames = session.getAttributeNames();

  

        while(attrNames.hasMoreElements()){

            String attrName = attrNames.nextElement();

            Object attrValue = session.getAttribute(attrName);

            result.put(attrName, attrValue);

        }

  

        // 그리드 데이터 처리

        if (list.size() > 0) {

            Iterator iter = result.keySet().iterator();

  

            while(iter.hasNext()){

                String keyname = (String)iter.next();

                if(_name.indexOf(keyname+",")>-1) continue;

  

                for(int i=0; i<list.size(); i++){

                    list.get(i).put(keyname, result.get(keyname));

                }

            }

  

            result.put("list", list);

        }

  

        return result;

    }

  

    /**

     * 세션 데이터를 CommonMap으로 변환

     * @param session: HTTP 세션 객체

     * @return CommonMap 객체

     */

    public static CommonMap parseSession(HttpSession session) {

        CommonMap result = new CommonMap();

        Enumeration<String> attrNames = session.getAttributeNames();

  

        while(attrNames.hasMoreElements()){

            String attrName = attrNames.nextElement();

            Object attrValue = session.getAttribute(attrName);

            result.put(attrName, attrValue);

        }

  

        return result;

    }

  

    /**

     * CommonMap 리스트를 인덱스 기반 CommonMap으로 변환

     * @param list: CommonMap 리스트

     * @return 인덱스 기반 CommonMap

     */

    public static CommonMap parseList(List<CommonMap> list) {

        CommonMap result = new CommonMap();

  

        if (list == null) return result;

        for (int i=0; i<list.size(); i++) {

            result.put(i, "" + i, list.get(i));

        }

  

        return result;

    }

  

    /**

     * CamelCase를 snake_case로 변환

     * @param camel: CamelCase 문자열

     * @return snake_case 문자열

     */

    public static String reverse2CamelCase(String camel) {

        String regex = "([a-z])([A-Z]+)";

        String replacement = "$1_$2";

  

        return camel.replaceAll(regex, replacement).toLowerCase();

    }

}

```

  

#### 3.3 실제 사용 예시

  

**컨트롤러에서의 CommonMap 사용**

```java

@RestController

public class CommonController {

  

    @Resource(name = "commonService")

    private CommonService commonService;

  

    /**

     * 공통 select 처리

     * @param request: HTTP 요청

     * @return CommonMap 리스트

     */

    @RequestMapping(value = "/common_select.do", method = RequestMethod.POST)

    public List<CommonMap> select(HttpServletRequest request) throws Exception {

        List<CommonMap> result = new ArrayList<CommonMap>();

        try {

            // 요청 파라미터를 CommonMap으로 변환

            CommonMap param = MapUtils.parseRequest(request);

            // 동적 쿼리 실행

            result = commonService.select(param);

        } catch (Exception e) {

            e.printStackTrace();

        }

        return result;

    }

  

    /**

     * 공통 insert/update/delete 처리

     * @param request: HTTP 요청

     * @return 처리 결과

     */

    @RequestMapping(value = "/common_insert.do", method = RequestMethod.POST)

    public ResultInfo insert(HttpServletRequest request) throws Exception {

        String msg = "";

        int result = 0;

        CommonMap data = new CommonMap();

        try {

            CommonMap param = MapUtils.parseRequest(request);

            List<CommonMap> list = param.getList("list");

            boolean isGrid = false;

            int success = 0;

            int total = 0;

            if (list.size() == 0) {

                // 단일 데이터 처리

                total = 1;

                // 키 생성이 필요한 경우

                if (param.getString("func").startsWith("IS") && param.has("queryKey")) {

                    CommonMap keyParam = MapUtils.parseRequest(request);

                    keyParam.put("queryId", param.getString("queryKey"));

                    CommonMap keyMap = commonService.selectOne(keyParam);

                    if (!keyMap.has(param.getString("keyCol"))) {

                        throw new NotFoundException("keyCol을 찾을 수 없습니다.");

                    } else {

                        param.put(param.getString("keyCol"), keyMap.getString(param.getString("keyCol")));

                    }

                }

                // CRUD 작업 실행

                if (param.getString("func").startsWith("IS")) {

                    success = commonService.insert(param);

                } else if (param.getString("func").startsWith("UP")) {

                    success = commonService.update(param);

                } else if (param.getString("func").startsWith("DL")) {

                    success = commonService.delete(param);

                }

            } else {

                // 그리드 데이터 처리

                String queryId = param.getString("queryId").substring(param.getString("queryId").lastIndexOf(".") + 1);

                String nameSpace = param.getString("queryId").replace(queryId, "");

                for(int idx=0; idx<list.size(); idx++) {

                    CommonMap item = list.get(idx);

                    String stateCol = item.getString("grdStateCol");

  

                    item.put("queryId", queryId);

                    item.put("nameSpace", nameSpace);

                    total++;

                    if (item.isEmpty("grdStateCol")) {

                        success++;

                    } else {

                        // 상태별 처리

                        switch (stateCol) {

                            case "C" :

                                success += isGrid ? commonService.gridInsert(item) : commonService.insert(item);

                                break;

                            case "U" :

                                success += isGrid ? commonService.gridUpdate(item) : commonService.update(item);

                                break;

                            case "D" :

                                success += isGrid ? commonService.gridDelete(item) : commonService.delete(item);

                                break;

                        }

                    }

                }

            }

            msg = String.format("처리 완료: %d/%d", success, total);

            data.put("success", success);

            data.put("total", total);

        } catch (Exception e) {

            msg = "처리 중 오류가 발생했습니다: " + e.getMessage();

            e.printStackTrace();

        }

        return ResultInfo.of(msg, result, data);

    }

}

```

  

### 4. 동적 쿼리 처리 시스템

  

#### 4.1 CommonService 구조

```java

/**

 * 동적 쿼리 처리를 위한 CommonService 구현체

 * 런타임에 queryId를 기반으로 MyBatis 매퍼를 동적 실행

 * 다중 쿼리 실행 및 그리드 데이터 처리 지원

 */

@Service("commonService")

public class CommonServiceImpl implements CommonService {

  

    @Resource(name = "commonRepository")

    private CommonRepository commonRepository;

    private final String NAMESPACE = "kr.co.wnpsoft.core.mapper.";

    private final String QUERYID_NOT_FOUND = "queryId가 존재하지 않습니다!";

    private final int MAX_QUERY_COUNT = 10; // 최대 쿼리 실행 횟수

  

    /**

     * 동적 select 처리 (queryId 기반)

     * @param queryId: 쿼리 ID

     * @param param: 파라미터

     * @return CommonMap 리스트

     * @throws Exception

     */

    public List<CommonMap> select(String queryId, CommonMap param) throws Exception {

        if (StringUtils.isEmpty(queryId)) throw new NotFoundException(QUERYID_NOT_FOUND);

        return commonRepository.selectList(NAMESPACE + queryId, param);

    }

  

    /**

     * 동적 select 처리 (CommonMap 내 queryId 사용)

     * @param param: 파라미터 (queryId 포함)

     * @return CommonMap 리스트

     * @throws Exception

     */

    public List<CommonMap> select(CommonMap param) throws Exception {

        if (StringUtils.isEmpty(param.getString("queryId")))

            throw new NotFoundException(QUERYID_NOT_FOUND);

        return commonRepository.selectList(NAMESPACE + param.getString("queryId"), param);

    }

    /**

     * 단일 레코드 조회

     * @param param: 파라미터 (queryId 포함)

     * @return CommonMap 객체

     * @throws Exception

     */

    public CommonMap selectOne(CommonMap param) throws Exception {

        if (StringUtils.isEmpty(param.getString("queryId")))

            throw new NotFoundException(QUERYID_NOT_FOUND);

        return commonRepository.selectOne(NAMESPACE + param.getString("queryId"), param);

    }

    /**

     * 동적 insert 처리

     * @param param: 파라미터 (queryId 포함)

     * @return 영향받은 행 수

     * @throws Exception

     */

    public int insert(CommonMap param) throws Exception {

        if (StringUtils.isEmpty(param.getString("queryId")))

            throw new NotFoundException(QUERYID_NOT_FOUND);

        return insert("", param);

    }

    /**

     * 동적 update 처리

     * @param param: 파라미터 (queryId 포함)

     * @return 영향받은 행 수

     * @throws Exception

     */

    public int update(CommonMap param) throws Exception {

        if (StringUtils.isEmpty(param.getString("queryId")))

            throw new NotFoundException(QUERYID_NOT_FOUND);

        return update("", param);

    }

    /**

     * 동적 delete 처리

     * @param param: 파라미터 (queryId 포함)

     * @return 영향받은 행 수

     * @throws Exception

     */

    public int delete(CommonMap param) throws Exception {

        if (StringUtils.isEmpty(param.getString("queryId")))

            throw new NotFoundException(QUERYID_NOT_FOUND);

        return delete("", param);

    }

    /**

     * 그리드 insert 처리

     * @param param: 파라미터 (nameSpace 포함)

     * @return 영향받은 행 수

     * @throws Exception

     */

    public int gridInsert(CommonMap param) throws Exception {

        return insert(param.getString("nameSpace") + "insert_", param);

    }

    /**

     * 그리드 update 처리

     * @param param: 파라미터 (nameSpace 포함)

     * @return 영향받은 행 수

     * @throws Exception

     */

    public int gridUpdate(CommonMap param) throws Exception {

        return update(param.getString("nameSpace") + "update_", param);

    }

    /**

     * 그리드 delete 처리

     * @param param: 파라미터 (nameSpace 포함)

     * @return 영향받은 행 수

     * @throws Exception

     */

    public int gridDelete(CommonMap param) throws Exception {

        return delete(param.getString("nameSpace") + "delete_", param);

    }

  

    /**

     * 다중 쿼리 insert 처리

     * @param prefix: 쿼리 접두사

     * @param param: 파라미터

     * @return 영향받은 행 수

     * @throws Exception

     */

    private int insert(String prefix, CommonMap param) throws Exception {

        int result = 0;

  

        try {

            // 최대 10개까지 쿼리 실행 시도

            for (int i=1; i<=MAX_QUERY_COUNT; i++) {

                String queryId = NAMESPACE + prefix + param.getString("queryId") + (i==1?"":i);

                // 매퍼 존재 여부 확인

                if (commonRepository.getSqlSession().getConfiguration().getMappedStatement(queryId) != null) {

                    int rows = commonRepository.insert(queryId, param);

                    result += i==1?rows:0; // 첫 번째 쿼리 결과만 반환

                }

                // 한 번만 실행 옵션

                if (param.getBoolean("runOnce")) break;

            }

        } catch (Exception e) {

            // 쿼리 실행 실패 시 무시

        }

  

        return result;

    }

    /**

     * 다중 쿼리 update 처리

     * @param prefix: 쿼리 접두사

     * @param param: 파라미터

     * @return 영향받은 행 수

     * @throws Exception

     */

    private int update(String prefix, CommonMap param) throws Exception {

        int result = 0;

  

        try {

            for (int i=1; i<=MAX_QUERY_COUNT; i++) {

                String queryId = NAMESPACE + prefix + param.getString("queryId") + (i==1?"":i);

                if (commonRepository.getSqlSession().getConfiguration().getMappedStatement(queryId) != null) {

                    int rows = commonRepository.update(queryId, param);

                    result += i==1?rows:0;

                }

                if (param.getBoolean("runOnce")) break;

            }

        } catch (Exception e) {}

  

        return result;

    }

    /**

     * 다중 쿼리 delete 처리

     * @param prefix: 쿼리 접두사

     * @param param: 파라미터

     * @return 영향받은 행 수

     * @throws Exception

     */

    private int delete(String prefix, CommonMap param) throws Exception {

        int result = 0;

  

        try {

            for (int i=1; i<=MAX_QUERY_COUNT; i++) {

                String queryId = NAMESPACE + prefix + param.getString("queryId") + (i==1?"":i);

                if (commonRepository.getSqlSession().getConfiguration().getMappedStatement(queryId) != null) {

                    int rows = commonRepository.delete(queryId, param);

                    result += i==1?rows:0;

                }

                if (param.getBoolean("runOnce")) break;

            }

        } catch (Exception e) {}

  

        return result;

    }

    /**

     * 동적 옵션 설정

     * @param queryId: 쿼리 ID

     * @param param: 파라미터

     * @return CommonMap 리스트

     * @throws Exception

     */

    public List<CommonMap> SetDynamicOption(String queryId, CommonMap param) throws Exception {

        List<CommonMap> query_result = new ArrayList<CommonMap>();

        try {

            String p_QueryId = param.getString("queryId");

            query_result = commonRepository.selectList(p_QueryId, param);

        } catch (Exception e) {

            // 쿼리 실행 실패 시 빈 리스트 반환

        }

  

        return query_result;

    }

}

```

  

#### 4.2 MyBatis 매퍼 구조

```xml

<!-- select.xml 예시 - W/O 리스트 검색 -->

<select id="select_woAllList" parameterType="commonMap" resultType="commonMap">

    SELECT A.WO_NO, A.WO_REV, A.PROJECT_NAME,

           CONVERT(A.WO_DATE,DATE) WO_DATE,

           CONVERT(A.DELIVERY_DATE,DATE) DELIVERY_DATE,

           A.STAMP_U_YORN, A.STAMP_U2_YORN, A.STAMP_PP_YORN, A.STAMP_S_YORN,

           A.STAMP_SQL_YORN, A.CLIENT_NAME

    FROM V_WO_MASTER A

    WHERE 1=1

    <!-- 날짜 범위 조건 -->

    <if test="startDate neq null and startDate neq ''">

        AND DATE_FORMAT(A.WO_DATE, '%Y%m%d') BETWEEN DATE_FORMAT(#{startDate}, '%Y%m%d') AND DATE_FORMAT(#{endDate}, '%Y%m%d')

    </if>

    <!-- W/O 번호 검색 -->

    <if test="pWoNo neq null and pWoNo neq ''">

        AND A.WO_NO LIKE '%${pWoNo}%'

    </if>

    <!-- W/O 구분 검색 -->

    <if test="pWoGubn neq null and pWoGubn neq ''">

        AND A.WO_GUBN COLLATE utf8mb4_general_ci = #{pWoGubn}

    </if>

    ORDER BY A.WO_DATE DESC, A.WO_NO DESC

</select>

  

<!-- 외주 업체 리스트 -->

<select id="select_outClientList" parameterType="commonMap" resultType="commonMap">

    SELECT PARTNER_CODE AS VALUE, PARTNER_NAME AS TEXT,

           CASE

               WHEN SUBSTRING(PARTNER_NAME, 1, 1) REGEXP '^[가-힣]+' THEN '1'

               WHEN SUBSTRING(PARTNER_NAME, 1, 1) REGEXP '^[0-9]+' THEN '4'

               WHEN SUBSTRING(PARTNER_NAME, 1, 1) REGEXP '^[a-zA-Z]+' THEN '3'

               ELSE '2'

           END AS SORT_ORDER

    FROM T_PARTNER

    WHERE USE_YN = 'Y'

    <if test="partnerName neq null and partnerName neq ''">

        AND PARTNER_NAME LIKE '%${partnerName}%'

    </if>

    ORDER BY SORT_ORDER, PARTNER_NAME

</select>

  

<!-- 공통코드 조회 -->

<select id="select_commCode" parameterType="commonMap" resultType="commonMap">

    SELECT CODE_ID AS VALUE, CODE_NAME AS TEXT,

           CODE_DESC, SORT_ORDER, USE_YN

    FROM T_COMMON_CODE

    WHERE PARENT_CODE_ID = #{parentCodeId}

    AND USE_YN = 'Y'

    <if test="codeId neq null and codeId neq ''">

        AND CODE_ID = #{codeId}

    </if>

    ORDER BY SORT_ORDER, CODE_ID

</select>

```

  

#### 4.3 동적 쿼리 특징

- **네임스페이스 기반**: `kr.co.wnpsoft.core.mapper.` + queryId

- **다중 쿼리 지원**: 동일한 패턴의 여러 쿼리 자동 실행 (최대 10개)

- **타입 안전성**: CommonMap을 통한 일관된 파라미터 처리

- **동적 조건**: MyBatis의 `<if>` 태그를 활용한 조건부 쿼리

- **그리드 데이터 처리**: nameSpace를 통한 그리드 전용 쿼리 실행

- **자동 키 생성**: queryKey를 통한 자동 키 생성 지원

- **실행 제어**: runOnce 옵션으로 단일 실행 제어

  

#### 4.4 실제 사용 예시

  

**JSP에서의 동적 쿼리 호출**

```javascript

// 그리드 데이터 로드

function loadTableData() {

    var frm = $("#frmMain");

    // 필수 파라미터 설정

    frm.addParam("result", $("#myGrid"));        // 그리드 태그

    frm.addParam("grid", "gridOptions");         // 그리드 옵션

    frm.addParam("baseData", "_originData");     // 원본 데이터 저장 변수

    // 쿼리 파라미터 설정

    frm.addParam("func", "IQ");                 // 조회 기능

    frm.addParam("query_id", "qc.utManage.select_utDetailList");

    frm.addParam("dataType", "json");           // JSON 응답 타입

    // 검색 조건 추가

    frm.addParam("hNdeNo", $("#khNdeNo").val());

    frm.addParam("hNdeType", $("#hNdeType").val());

    frm.request();

}

  

// 데이터 저장

function saveData() {

    var frm = $("#frmMain");

    frm.addParam("func", "IS");                 // 저장 기능

    frm.addParam("queryId", "qc.utManage.insert_utDetail");

    frm.addParam("dataType", "json");

    // 저장할 데이터 추가

    frm.addParam("ndeNo", $("#ndeNo").val());

    frm.addParam("ndeType", $("#ndeType").val());

    frm.addParam("ndeDtlSeq", $("#ndeDtlSeq").val());

    frm.request();

}

```

  

**컨트롤러에서의 동적 쿼리 처리**

```java

@RestController

public class QcController {

  

    @Resource(name = "commonService")

    private CommonService commonService;

  

    /**

     * UT 상세 리스트 조회

     * @param request: HTTP 요청

     * @return CommonMap 리스트

     */

    @RequestMapping(value = "/qc/utDetailList.do", method = RequestMethod.POST)

    public List<CommonMap> utDetailList(HttpServletRequest request) {

        List<CommonMap> result = new ArrayList<CommonMap>();

        try {

            CommonMap param = MapUtils.parseRequest(request);

            // 동적 쿼리 실행

            result = commonService.select(param);

        } catch (Exception e) {

            e.printStackTrace();

        }

        return result;

    }

  

    /**

     * UT 상세 정보 저장

     * @param request: HTTP 요청

     * @return 처리 결과

     */

    @RequestMapping(value = "/qc/utDetailSave.do", method = RequestMethod.POST)

    public ResultInfo utDetailSave(HttpServletRequest request) {

        String msg = "";

        int success = 0;

        try {

            CommonMap param = MapUtils.parseRequest(request);

            // 단일 데이터 저장

            if (param.getString("func").startsWith("IS")) {

                success = commonService.insert(param);

            } else if (param.getString("func").startsWith("UP")) {

                success = commonService.update(param);

            } else if (param.getString("func").startsWith("DL")) {

                success = commonService.delete(param);

            }

            msg = success > 0 ? "저장되었습니다." : "저장에 실패했습니다.";

        } catch (Exception e) {

            msg = "오류가 발생했습니다: " + e.getMessage();

            e.printStackTrace();

        }

        return ResultInfo.of(msg, success, new CommonMap());

    }

}

```

  

## 🔧 공장식 설계의 핵심 원리

  

### 1. 컴포넌트 재사용성

- **표준화된 태그**: 일관된 UI 컴포넌트 제공

- **설정 기반 동작**: 속성만 변경하여 다양한 동작 구현

- **확장 가능한 구조**: 새로운 기능 추가 시 기존 구조 활용

  

### 2. 데이터 처리 표준화

- **CommonMap**: 모든 데이터를 통일된 형태로 처리

- **자동 변환**: CamelCase, 타입 변환 등 자동 처리

- **세션 통합**: 요청과 세션 정보 자동 병합

  

### 3. 동적 처리 메커니즘

- **런타임 쿼리**: queryId 기반 동적 SQL 실행

- **권한 통합**: 중앙화된 권한 관리

- **라우트 자동화**: URL 패턴 기반 자동 뷰 매핑

  

## 📊 장점 및 특징

  

### 1. 개발 효율성

- **빠른 개발**: 표준화된 컴포넌트로 신속한 UI 구축

- **일관성**: 통일된 코딩 스타일과 데이터 처리

- **재사용성**: 높은 컴포넌트 재사용률

  

### 2. 유지보수성

- **중앙화된 관리**: 공통 로직의 중앙 집중화

- **표준화된 구조**: 예측 가능한 코드 구조

- **확장성**: 새로운 기능 추가 시 기존 구조 활용

  

### 3. 확장성

- **모듈화**: 독립적인 컴포넌트 구조

- **설정 기반**: 코드 변경 없이 동작 변경 가능

- **다중 데이터베이스**: MariaDB, SQL Server 동시 지원

  

## ⚠️ 주의사항 및 개선점

  

### 1. 레거시 특성

- **전자정부 프레임워크 의존성**: 특정 프레임워크에 강하게 결합

- **JSP 기반**: 최신 프론트엔드 기술과의 통합 어려움

- **XML 설정**: 대량의 XML 설정 파일 관리

  

### 2. 개선 방향

- **모던 프론트엔드 도입**: React/Vue.js 등 SPA 프레임워크 고려

- **REST API 표준화**: JSON 기반 API 통합

- **마이크로서비스 전환**: 모놀리식 구조의 분리

  

## 🎯 결론 및 권장사항

  

### 프로젝트의 강점

  

이 프로젝트는 전자정부 프레임워크를 기반으로 한 매우 잘 설계된 레거시 시스템입니다. 공장식 설계를 통해 높은 재사용성과 개발 효율성을 달성했으며, 특히 다음과 같은 강점을 가지고 있습니다:

  

#### 1. **높은 재사용성**

- **표준화된 JSP Taglib**: 일관된 UI 컴포넌트로 빠른 화면 개발

- **동적 라우팅**: URL 패턴 기반 자동 뷰 매핑으로 코드 중복 최소화

- **CommonMap**: 통일된 데이터 처리로 일관성 보장

- **동적 쿼리**: queryId 기반 런타임 쿼리 실행으로 유연성 확보

  

#### 2. **신입 개발자 친화적**

- **표준화된 패턴**: 예측 가능한 코드 구조

- **상세한 주석**: 모든 메서드와 파라미터에 대한 명확한 설명

- **재사용 가능한 컴포넌트**: 기존 컴포넌트 활용으로 빠른 개발

- **중앙화된 관리**: 공통 로직의 효율적 관리

  

#### 3. **확장성과 유지보수성**

- **모듈화된 구조**: 독립적인 컴포넌트 설계

- **설정 기반 동작**: 코드 변경 없이 동작 변경 가능

- **다중 데이터베이스 지원**: MariaDB, SQL Server 동시 지원

- **권한 통합 관리**: 중앙화된 권한 검증 시스템

  

### 개선 권장사항

  

#### 1. **점진적 현대화**

- **프론트엔드 업그레이드**: React/Vue.js 등 SPA 프레임워크 도입 고려

- **REST API 표준화**: JSON 기반 API 통합

- **마이크로서비스 전환**: 모놀리식 구조의 점진적 분리

  

#### 2. **기술 스택 현대화**

- **Spring Boot 마이그레이션**: 전자정부 프레임워크에서 Spring Boot로 전환

- **JPA 도입**: MyBatis와 JPA 하이브리드 사용

- **Docker 컨테이너화**: 배포 및 운영 환경 표준화

  

#### 3. **개발 프로세스 개선**

- **CI/CD 파이프라인**: 자동화된 빌드 및 배포

- **코드 품질 관리**: SonarQube 등 정적 분석 도구 도입

- **API 문서화**: Swagger/OpenAPI를 통한 API 문서 자동화

  

### 신입 개발자를 위한 학습 가이드

  

#### 1. **기본 개념 이해**

- **전자정부 프레임워크**: 공공기관 표준 프레임워크 이해

- **Spring MVC**: 웹 애플리케이션 아키텍처 패턴

- **MyBatis**: SQL 매퍼 프레임워크 활용법

- **JSP/JSTL**: 서버사이드 템플릿 엔진

  

#### 2. **프로젝트 특화 학습**

- **CommonMap 활용법**: 통합 데이터 처리 방식

- **동적 라우팅**: URL 패턴 기반 뷰 매핑

- **JSP Taglib**: 커스텀 태그 개발 및 사용

- **동적 쿼리**: 런타임 쿼리 실행 메커니즘

  

#### 3. **실무 적용 방법**

- **기존 컴포넌트 활용**: 재사용 가능한 태그 및 유틸리티 사용

- **표준 패턴 준수**: 프로젝트의 코딩 컨벤션 따르기

- **점진적 개선**: 레거시 코드의 점진적 현대화

- **문서화**: 코드 변경 시 상세한 주석 및 문서 작성

  

### 최종 평가

  

이 프로젝트는 **공장식 설계**의 모범 사례입니다. 높은 재사용성과 개발 효율성을 통해 신입 개발자도 빠르게 적응할 수 있도록 잘 구조화되어 있으며, 특히 JSP Taglib, 동적 라우팅, CommonMap, 동적 쿼리 시스템은 현대적인 개발 패턴의 선구자적 역할을 하고 있습니다.

  

다만, 최신 웹 개발 트렌드와의 통합을 위해서는 점진적인 현대화가 필요하며, 특히 프론트엔드 기술 스택의 업그레이드가 우선적으로 고려되어야 합니다. 이를 통해 레거시 시스템의 장점을 유지하면서도 현대적인 개발 환경을 구축할 수 있을 것입니다.